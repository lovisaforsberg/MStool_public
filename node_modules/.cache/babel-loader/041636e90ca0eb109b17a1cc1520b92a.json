{"ast":null,"code":"var _jsxFileName = \"/Users/lovisaforsberg/MS_vis/ms_viz/src/components/linechart.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useRef, useReducer, useState, createContext } from \"react\";\nimport * as d3 from 'd3';\nimport ReactTooltip from 'react-tooltip';\nimport '../style/linechart.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst LineChart = () => {\n  _s();\n\n  const d3Container = useRef(null);\n  const data = [{\n    id: 'pos',\n    values: [{\n      month: 'jan',\n      number: 20\n    }, {\n      month: 'feb',\n      number: 20\n    }, {\n      month: 'mars',\n      number: 20\n    }, {\n      month: 'april',\n      number: 20\n    }, {\n      month: 'may',\n      number: 20\n    }, {\n      month: 'june',\n      number: 20\n    }]\n  }, {\n    id: 'neg',\n    values: [{\n      month: 'jan',\n      number: 30\n    }, {\n      month: 'feb',\n      number: 30\n    }, {\n      month: 'mars',\n      number: 30\n    }, {\n      month: 'april',\n      number: 30\n    }, {\n      month: 'may',\n      number: 30\n    }, {\n      month: 'june',\n      number: 30\n    }]\n  }, {\n    id: 'neu',\n    values: [{\n      month: 'jan',\n      number: 50\n    }, {\n      month: 'feb',\n      number: 50\n    }, {\n      month: 'mars',\n      number: 50\n    }, {\n      month: 'april',\n      number: 50\n    }, {\n      month: 'may',\n      number: 50\n    }, {\n      month: 'june',\n      number: 50\n    }]\n  }];\n  const months = ['jan', 'feb', 'mars', 'april', 'may', 'june'];\n  useEffect(() => {\n    d3.select(\".root_linechart\").selectAll('*').remove();\n    var keys = months;\n    var parseTime = d3.timeParse(\"%Y%m%d\"),\n        formatDate = d3.timeFormat(\"%Y-%m-%d\"),\n        bisectDate = d3.bisector(d => d.date).left,\n        formatValue = d3.format(\",.0f\");\n    var margin = {\n      top: 15,\n      right: 35,\n      bottom: 15,\n      left: 35\n    },\n        width = 500 - margin.left - margin.right,\n        height = 250 - margin.top - margin.bottom;\n    var x = d3.scaleBand().domain(keys).rangeRound([0, width]).padding(0.4);\n    var y = d3.scaleLinear().range([height, 0]).domain([0, 100]);\n    var z = d3.scaleOrdinal(['#63A37B', '#F15645', '#7D7D7D']);\n    var line = d3.line().curve(d3.curveCardinal).x(d => x(d.month)).y(d => y(d.number));\n    var xAxis = d3.axisBottom(x).ticks(5);\n    var yAxis = d3.axisLeft(y) // .scale(y1)\n    .tickFormat(function (d) {\n      return parseInt(d);\n    }).tickSize(-width + margin.right + margin.left);\n    var svg = d3.select(d3Container.current).attr('class', 'root_linechart').attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom);\n    svg.append(\"g\").attr(\"class\", \"x-axis\").style('color', '#999').attr(\"transform\", \"translate(0,\" + (height - margin.bottom) + \")\").call(xAxis);\n    svg.append(\"g\").attr(\"class\", \"y-axis\").style('color', '#999').attr(\"transform\", \"translate(\" + margin.left + \",0)\").call(yAxis);\n    var focus = svg.append(\"g\").attr(\"class\", \"focus\").style(\"display\", \"none\");\n    focus.append(\"line\").attr(\"class\", \"lineHover\").style(\"stroke\", \"#999\").attr(\"stroke-width\", 1).style(\"shape-rendering\", \"crispEdges\").style(\"opacity\", 0.5).attr(\"y1\", -height).attr(\"y2\", 0);\n    focus.append(\"text\").attr(\"class\", \"lineHoverDate\").attr(\"text-anchor\", \"middle\").attr(\"font-size\", 12);\n    var overlay = svg.append(\"rect\").attr(\"class\", \"overlay\").attr(\"x\", margin.left).attr(\"width\", width - margin.right - margin.left).attr(\"height\", height);\n    var sentiment = svg.selectAll(\".cities\").data(data);\n    sentiment.exit().remove();\n    sentiment.enter().insert(\"g\", \".focus\").append(\"path\").attr(\"class\", \"line cities\").style(\"stroke\", d => z(d.id)).merge(sentiment) //.transition().duration(speed)\n    .attr(\"d\", d => line(d.values));\n    tooltip(months);\n\n    function tooltip(copy) {\n      var labels = focus.selectAll(\".lineHoverText\").data(copy);\n      labels.enter().append(\"text\").attr(\"class\", \"lineHoverText\").style(\"fill\", d => z(d)).attr(\"text-anchor\", \"start\").attr(\"font-size\", 12).attr(\"dy\", (_, i) => 1 + i * 2 + \"em\").merge(labels);\n      var circles = focus.selectAll(\".hoverCircle\").data(copy);\n      circles.enter().append(\"circle\").attr(\"class\", \"hoverCircle\").style(\"fill\", d => z(d)).attr(\"r\", 2.5).merge(circles);\n      svg.selectAll(\".overlay\").on(\"mouseover\", function () {\n        focus.style(\"display\", null);\n      }).on(\"mouseout\", function () {\n        focus.style(\"display\", \"none\");\n      }).on(\"mousemove\", mousemove);\n\n      function mousemove() {\n        var x0 = x.invert(d3.mouse(this)[0]),\n            i = bisectDate(data_var, x0, 1),\n            d0 = data_var[i - 1],\n            d1 = data_var[i],\n            d = x0 - d0.month > d1.month - x0 ? d1 : d0;\n        focus.select(\".lineHover\").attr(\"transform\", \"translate(\" + x(d.month) + \",\" + height + \")\");\n        focus.select(\".lineHoverDate\").attr(\"transform\", \"translate(\" + x(d.moth) + \",\" + (height + margin.bottom) + \")\").text(d.month);\n        focus.selectAll(\".hoverCircle\").attr(\"cy\", e => y(d[e])).attr(\"cx\", x(d.month));\n        focus.selectAll(\".lineHoverText\").attr(\"transform\", \"translate(\" + x(d.month) + \",\" + height / 2.5 + \")\") //.text(e => e + \" \"  + formatValue(d[e])+' %');\n        .text(function (e) {\n          if (e.slice(0, 3) === 'pos') {\n            return 'Positive: ' + formatValue(d[e]) + ' %';\n          } else if (e.slice(0, 3) === 'neg') {\n            return 'Negative: ' + formatValue(d[e]) + ' %';\n          } else if (e.slice(0, 3) === 'neu') {\n            return 'Neatural: ' + formatValue(d[e]) + ' %';\n          }\n        });\n        x(d.date) > width - width / 4 ? focus.selectAll(\"text.lineHoverText\").attr(\"text-anchor\", \"end\").attr(\"dx\", -10) : focus.selectAll(\"text.lineHoverText\").attr(\"text-anchor\", \"start\").attr(\"dx\", 10);\n      }\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"svg\", {\n      id: \"lineChart\",\n      width: \"595\",\n      height: \"287\",\n      ref: d3Container\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n\n_s(LineChart, \"W4i3Ntv1V7JhLIB1f9IS/+wu8BI=\");\n\n_c = LineChart;\nexport default LineChart;\n\nvar _c;\n\n$RefreshReg$(_c, \"LineChart\");","map":{"version":3,"sources":["/Users/lovisaforsberg/MS_vis/ms_viz/src/components/linechart.js"],"names":["React","useContext","useEffect","useRef","useReducer","useState","createContext","d3","ReactTooltip","LineChart","d3Container","data","id","values","month","number","months","select","selectAll","remove","keys","parseTime","timeParse","formatDate","timeFormat","bisectDate","bisector","d","date","left","formatValue","format","margin","top","right","bottom","width","height","x","scaleBand","domain","rangeRound","padding","y","scaleLinear","range","z","scaleOrdinal","line","curve","curveCardinal","xAxis","axisBottom","ticks","yAxis","axisLeft","tickFormat","parseInt","tickSize","svg","current","attr","append","style","call","focus","overlay","sentiment","exit","enter","insert","merge","tooltip","copy","labels","_","i","circles","on","mousemove","x0","invert","mouse","data_var","d0","d1","moth","text","e","slice"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useRef, useReducer, useState, createContext } from \"react\";\nimport * as d3 from 'd3'\nimport ReactTooltip from 'react-tooltip';\nimport '../style/linechart.css'\n\nconst LineChart = () =>{\n\n    const d3Container = useRef(null)\n\n    const data =[\n        {id:'pos', values:[\n            {month:'jan', number: 20},\n            {month:'feb', number: 20},\n            {month:'mars', number: 20},\n            {month:'april', number: 20},\n            {month:'may', number: 20},\n            {month:'june', number: 20},\n        ]},\n        {id:'neg', values:[\n            {month:'jan', number: 30},\n            {month:'feb', number: 30},\n            {month:'mars', number: 30},\n            {month:'april', number: 30},\n            {month:'may', number: 30},\n            {month:'june', number: 30},\n        ]},\n        {id:'neu', values:[\n            {month:'jan', number: 50},\n            {month:'feb', number: 50},\n            {month:'mars', number: 50},\n            {month:'april', number: 50},\n            {month:'may', number: 50},\n            {month:'june', number: 50},\n        ]},\n\n    ]\n\n    const months = ['jan', 'feb', 'mars', 'april', 'may', 'june']\n\n    useEffect(()=>{\n\n    d3.select(\".root_linechart\").selectAll('*').remove()\n\n    var keys = months\n\n    var parseTime = d3.timeParse(\"%Y%m%d\"),\n\t\tformatDate = d3.timeFormat(\"%Y-%m-%d\"),\n\t\tbisectDate = d3.bisector(d => d.date).left,\n\t\tformatValue = d3.format(\",.0f\");\n\n    var margin = {top: 15, right: 35, bottom: 15, left: 35},\n        width = 500 - margin.left - margin.right,\n        height = 250 - margin.top - margin.bottom;\n\n\n    var x = d3.scaleBand()\n        .domain(keys)\n        .rangeRound([0, width])\n        .padding(0.4);\n\n    var y = d3.scaleLinear()\n        .range([height, 0])\n        .domain([0, 100]);\n\n\n\tvar z = d3.scaleOrdinal(['#63A37B','#F15645', '#7D7D7D']);\n\n    var line = d3.line()\n\t\t.curve(d3.curveCardinal)\n\t\t.x(d => x(d.month))\n\t\t.y(d => y(d.number));\n\n\n    var xAxis = d3.axisBottom(x)\n        .ticks(5);\n\n    var yAxis = d3.axisLeft(y)\n        // .scale(y1)\n         .tickFormat(function(d) { return parseInt(d) })\n         .tickSize(-width + margin.right + margin.left)\n\n\n    var svg = d3.select(d3Container.current)\n        .attr('class', 'root_linechart')\n        .attr(\"width\", width + margin.left + margin.right)\n        .attr(\"height\", height + margin.top + margin.bottom)\n\n    svg.append(\"g\")\n\t\t.attr(\"class\",\"x-axis\")\n        .style('color', '#999')\n\t\t.attr(\"transform\", \"translate(0,\" + (height - margin.bottom) + \")\")\n\t\t.call(xAxis);\n\n\tsvg.append(\"g\")\n\t\t.attr(\"class\", \"y-axis\")\n        .style('color', '#999')\n\t\t.attr(\"transform\", \"translate(\" + margin.left + \",0)\")\n        .call(yAxis)\n\n    \n\n\tvar focus = svg.append(\"g\")\n\t\t.attr(\"class\", \"focus\")\n\t\t.style(\"display\", \"none\");\n\n\tfocus.append(\"line\").attr(\"class\", \"lineHover\")\n\t\t.style(\"stroke\", \"#999\")\n\t\t.attr(\"stroke-width\", 1)\n\t\t.style(\"shape-rendering\", \"crispEdges\")\n\t\t.style(\"opacity\", 0.5)\n\t\t.attr(\"y1\", -height)\n\t\t.attr(\"y2\",0);\n\n\n\n\tfocus.append(\"text\").attr(\"class\", \"lineHoverDate\")\n\t\t.attr(\"text-anchor\", \"middle\")\n\t\t.attr(\"font-size\", 12);\n\n\tvar overlay = svg.append(\"rect\")\n\t\t.attr(\"class\", \"overlay\")\n\t\t.attr(\"x\", margin.left)\n\t\t.attr(\"width\", width - margin.right - margin.left)\n\t\t.attr(\"height\", height)\n\n    var sentiment = svg.selectAll(\".cities\")\n        .data(data);\n\n    sentiment.exit().remove();\n\n    sentiment.enter().insert(\"g\", \".focus\").append(\"path\")\n\t\t\t.attr(\"class\", \"line cities\")\n\t\t\t.style(\"stroke\", d => z(d.id))\n\t\t\t.merge(sentiment)\n\t\t//.transition().duration(speed)\n\t\t\t.attr(\"d\", d => line(d.values))\n\n    tooltip(months)\n\nfunction tooltip(copy) {\n\t\t\n\t\tvar labels = focus.selectAll(\".lineHoverText\")\n\t\t\t.data(copy)\n\n\t\tlabels.enter().append(\"text\")\n\t\t\t.attr(\"class\", \"lineHoverText\")\n\t\t\t.style(\"fill\", d => z(d))\n\t\t\t.attr(\"text-anchor\", \"start\")\n\t\t\t.attr(\"font-size\",12)\n\t\t\t.attr(\"dy\", (_, i) => 1 + i * 2 + \"em\")\n\t\t\t.merge(labels);\n\n\t\tvar circles = focus.selectAll(\".hoverCircle\")\n\t\t\t.data(copy)\n\n\t\tcircles.enter().append(\"circle\")\n\t\t\t.attr(\"class\", \"hoverCircle\")\n\t\t\t.style(\"fill\", d => z(d))\n\t\t\t.attr(\"r\", 2.5)\n\t\t\t.merge(circles);\n\n\t\tsvg.selectAll(\".overlay\")\n\t\t\t.on(\"mouseover\", function() { focus.style(\"display\", null); })\n\t\t\t.on(\"mouseout\", function() { focus.style(\"display\", \"none\"); })\n\t\t\t.on(\"mousemove\", mousemove);\n\n\t\tfunction mousemove() {\n\n\t\t\tvar x0 = x.invert(d3.mouse(this)[0]),\n\t\t\t\ti = bisectDate(data_var, x0, 1),\n\t\t\t\td0 = data_var[i - 1],\n\t\t\t\td1 = data_var[i],\n\t\t\t\td = x0 - d0.month > d1.month - x0 ? d1 : d0;\n\n\t\t\tfocus.select(\".lineHover\")\n\t\t\t\t.attr(\"transform\", \"translate(\" + x(d.month) + \",\" + height + \")\");\n\n\t\t\tfocus.select(\".lineHoverDate\")\n\t\t\t\t.attr(\"transform\", \n\t\t\t\t\t\"translate(\" + x(d.moth) + \",\" + (height + margin.bottom) + \")\")\n\t\t\t\t.text((d.month));\n\n\t\t\tfocus.selectAll(\".hoverCircle\")\n\t\t\t\t.attr(\"cy\", e => y(d[e]))\n\t\t\t\t.attr(\"cx\", x(d.month));\n\n\t\t\tfocus.selectAll(\".lineHoverText\")\n\t\t\t\t.attr(\"transform\", \n\t\t\t\t\t\"translate(\" + (x(d.month)) + \",\" + height / 2.5 + \")\")\n\t\t\t\t//.text(e => e + \" \"  + formatValue(d[e])+' %');\n        .text(function(e){if (e.slice(0,3) === 'pos'){\n          return 'Positive: ' + formatValue(d[e])+ ' %'\n          }\n          else if (e.slice(0,3) === 'neg'){\n            return 'Negative: ' + formatValue(d[e])+ ' %'\n          }\n          else if ( e.slice(0,3) === 'neu'){\n            return 'Neatural: ' + formatValue(d[e])+ ' %'\n          }\n      });\n\n\t\t\tx(d.date) > (width - width / 4) \n\t\t\t\t? focus.selectAll(\"text.lineHoverText\")\n\t\t\t\t\t.attr(\"text-anchor\", \"end\")\n\t\t\t\t\t.attr(\"dx\", -10)\n\t\t\t\t: focus.selectAll(\"text.lineHoverText\")\n\t\t\t\t\t.attr(\"text-anchor\", \"start\")\n\t\t\t\t\t.attr(\"dx\", 10)\n\t\t}\n\t}\n\n    })\n\n    return(\n        <>\n            <svg id='lineChart' width=\"595\" height=\"287\" ref={d3Container}></svg>\n        </>\n    )\n}\n\nexport default LineChart\n"]},"metadata":{},"sourceType":"module"}