{"ast":null,"code":"var _jsxFileName = \"/Users/lovisaforsberg/MS_vis/ms_viz/src/components/netsentiment.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useRef, useReducer, useState, createContext } from \"react\";\nimport * as d3 from 'd3';\nimport { SentimentContext } from '../App';\nimport { HoverContext } from '../App';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst NetSentiment = () => {\n  _s();\n\n  var data = [{\n    name: \"Puerto Rico\",\n    value: -0.14281404556189306\n  }, {\n    name: \"West Virginia\",\n    value: -0.032881380080021845\n  }, {\n    name: \"Illinois\",\n    value: -0.01237748849783861\n  }, {\n    name: \"Vermont\",\n    value: -0.0027998804617245794\n  }, {\n    name: \"Connecticut\",\n    value: -0.0024649582817701924\n  }, {\n    name: \"Mississippi\",\n    value: 0.0029831863814104216\n  }];\n  const d3Container = useRef(null);\n  useEffect(() => {\n    var barHeight = 25;\n    var height = Math.ceil((data.length + 0.1) * barHeight) + margin.top + margin.bottom;\n    var margin = {\n      top: 30,\n      right: 60,\n      bottom: 10,\n      left: 60\n    };\n    var tickFormat = metric === \"absolute\" ? d3.formatPrefix(\"+.1\", 1e6) : format;\n    var format = d3.format(metric === \"absolute\" ? \"+,d\" : \"+,.0%\");\n    var x = d3.scaleLinear().domain(d3.extent(data, d => d.value)).rangeRound([margin.left, width - margin.right]);\n    var y = d3.scaleBand().domain(d3.range(data.length)).rangeRound([margin.top, height - margin.bottom]).padding(0.1);\n\n    var xAxis = g => g.attr(\"transform\", `translate(0,${margin.top})`).call(d3.axisTop(x).ticks(width / 80).tickFormat(function (d) {\n      return parseInt(d);\n    })).call(g => g.select(\".domain\").remove());\n\n    var yAxis = g => g.attr(\"transform\", `translate(${x(0)},0)`).call(d3.axisLeft(y).tickFormat(i => data[i].name).tickSize(0).tickPadding(6)).call(g => g.selectAll(\".tick text\").filter(i => data[i].value < 0).attr(\"text-anchor\", \"start\").attr(\"x\", 6)); // CHART\n\n\n    const svg = d3.select(d3Container.current).attr('class', 'root_netsentiment').attr(\"viewBox\", [0, 0, width, height]).append('svg');\n    svg.append(\"g\").selectAll(\"rect\").data(data).join(\"rect\").attr(\"fill\", d => d3.schemeSet1[d.value > 0 ? 1 : 0]).attr(\"x\", d => x(Math.min(d.value, 0))).attr(\"y\", (d, i) => y(i)).attr(\"width\", d => Math.abs(x(d.value) - x(0))).attr(\"height\", y.bandwidth());\n    svg.append(\"g\").attr(\"font-family\", \"sans-serif\").attr(\"font-size\", 10).selectAll(\"text\").data(data).join(\"text\").attr(\"text-anchor\", d => d.value < 0 ? \"end\" : \"start\").attr(\"x\", d => x(d.value) + Math.sign(d.value - 0) * 4).attr(\"y\", (d, i) => y(i) + y.bandwidth() / 2).attr(\"dy\", \"0.35em\").text(d => format(d.value));\n    svg.append(\"g\").call(xAxis);\n    svg.append(\"g\").call(yAxis);\n    return svg.node();\n  }); // close useeffect\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"svg\", {\n      id: \"netSentiment\",\n      ref: d3Container\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n\n_s(NetSentiment, \"W4i3Ntv1V7JhLIB1f9IS/+wu8BI=\");\n\n_c = NetSentiment;\nexport default NetSentiment;\n\nvar _c;\n\n$RefreshReg$(_c, \"NetSentiment\");","map":{"version":3,"sources":["/Users/lovisaforsberg/MS_vis/ms_viz/src/components/netsentiment.js"],"names":["React","useContext","useEffect","useRef","useReducer","useState","createContext","d3","SentimentContext","HoverContext","NetSentiment","data","name","value","d3Container","barHeight","height","Math","ceil","length","margin","top","bottom","right","left","tickFormat","metric","formatPrefix","format","x","scaleLinear","domain","extent","d","rangeRound","width","y","scaleBand","range","padding","xAxis","g","attr","call","axisTop","ticks","parseInt","select","remove","yAxis","axisLeft","i","tickSize","tickPadding","selectAll","filter","svg","current","append","join","schemeSet1","min","abs","bandwidth","sign","text","node"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useRef, useReducer, useState, createContext } from \"react\";\nimport * as d3 from 'd3'\nimport {SentimentContext} from '../App'\nimport {HoverContext} from '../App'\n\n\nconst NetSentiment = () =>{\n\n    var data = [{name: \"Puerto Rico\", value: -0.14281404556189306}\n    ,{name: \"West Virginia\", value: -0.032881380080021845}\n    ,{name: \"Illinois\", value: -0.01237748849783861}\n    ,{name: \"Vermont\", value: -0.0027998804617245794}\n    ,{name: \"Connecticut\", value: -0.0024649582817701924}\n    ,{name: \"Mississippi\", value: 0.0029831863814104216}]\n\n    const d3Container = useRef(null)\n\n    useEffect(()=>{\n\n        var barHeight = 25\n        var height = Math.ceil((data.length + 0.1) * barHeight) + margin.top + margin.bottom\n        var margin = ({top: 30, right: 60, bottom: 10, left: 60})\n\n        var tickFormat = metric === \"absolute\" ? d3.formatPrefix(\"+.1\", 1e6) : format\n        var format = d3.format(metric === \"absolute\" ? \"+,d\" : \"+,.0%\")\n\n        var x = d3.scaleLinear()\n        .domain(d3.extent(data, d => d.value))\n        .rangeRound([margin.left, width - margin.right])\n\n        var y = d3.scaleBand()\n        .domain(d3.range(data.length))\n        .rangeRound([margin.top, height - margin.bottom])\n        .padding(0.1)\n\n        var xAxis = g => g\n        .attr(\"transform\", `translate(0,${margin.top})`)\n        .call(d3.axisTop(x).ticks(width / 80).tickFormat(function(d) { return parseInt(d)}))\n        .call(g => g.select(\".domain\").remove())\n\n        var yAxis = g => g\n        .attr(\"transform\", `translate(${x(0)},0)`)\n        .call(d3.axisLeft(y).tickFormat(i => data[i].name).tickSize(0).tickPadding(6))\n        .call(g => g.selectAll(\".tick text\").filter(i => data[i].value < 0)\n        .attr(\"text-anchor\", \"start\")\n        .attr(\"x\", 6))\n\n        // CHART\n            \n        const svg = d3.select(d3Container.current)\n            .attr('class', 'root_netsentiment')\n            .attr(\"viewBox\", [0, 0, width, height])\n            .append('svg')\n\n        svg.append(\"g\")\n            .selectAll(\"rect\")\n            .data(data)\n            .join(\"rect\")\n            .attr(\"fill\", d => d3.schemeSet1[d.value > 0 ? 1 : 0])\n            .attr(\"x\", d => x(Math.min(d.value, 0)))\n            .attr(\"y\", (d, i) => y(i))\n            .attr(\"width\", d => Math.abs(x(d.value) - x(0)))\n            .attr(\"height\", y.bandwidth());\n\n        svg.append(\"g\")\n            .attr(\"font-family\", \"sans-serif\")\n            .attr(\"font-size\", 10)\n            .selectAll(\"text\")\n            .data(data)\n            .join(\"text\")\n            .attr(\"text-anchor\", d => d.value < 0 ? \"end\" : \"start\")\n            .attr(\"x\", d => x(d.value) + Math.sign(d.value - 0) * 4)\n            .attr(\"y\", (d, i) => y(i) + y.bandwidth() / 2)\n            .attr(\"dy\", \"0.35em\")\n            .text(d => format(d.value));\n\n        svg.append(\"g\")\n            .call(xAxis);\n\n        svg.append(\"g\")\n            .call(yAxis);\n\n        return svg.node();\n\n    }) // close useeffect\n\n    return(\n        <>\n            <svg id='netSentiment' ref={d3Container}></svg>\n\n        </>\n    )\n}\n\nexport default NetSentiment"]},"metadata":{},"sourceType":"module"}