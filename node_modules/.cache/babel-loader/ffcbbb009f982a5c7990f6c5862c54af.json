{"ast":null,"code":"import _slicedToArray from\"/Users/lovisaforsberg/MS_vis/ms_viz/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useRef,useReducer,useState,createContext}from\"react\";import*as d3 from'd3';import{SentimentContext}from'../App';import{HoverContext}from'../App';import'../style/netsentiment.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var NetSentiment=function NetSentiment(){var SentSentimentContext=useContext(SentimentContext);var choosenSentiment=SentSentimentContext.choosenSentiment,setChoosenSentiment=SentSentimentContext.setChoosenSentiment;//const [postData, setPostData] = useState([])\nvar SentHoverContext=useContext(HoverContext);var hover=SentHoverContext.hover,setHover=SentHoverContext.setHover;// weights\nvar _useState=useState(1),_useState2=_slicedToArray(_useState,2),commentWeight=_useState2[0],setCommentWeight=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),likeWeight=_useState4[0],setLikeWeight=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),shareWeight=_useState6[0],setShareWeight=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),useComment=_useState8[0],setUseComment=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),useLike=_useState10[0],setUseLike=_useState10[1];var _useState11=useState(true),_useState12=_slicedToArray(_useState11,2),useShare=_useState12[0],setUseShare=_useState12[1];var postData=[];var handleData=function handleData(data,variable){if(!('children'in data)){if(variable=='comments'){postData.push({//value: (data.pos-data.neg)*data.comments, name:data.name\ncomment:data.comments,like:data.likes,share:data.shares,name:data.name,pos:data.pos,neg:data.neg,followers:data.followers});}if(variable=='likes'){postData.push({value:(data.pos-data.neg)*data.likes,name:data.name});}}else{data.children.forEach(function(child){handleData(child,variable);});}};var handleCommentWeight=function handleCommentWeight(event){setCommentWeight(event.target.value);};var handleLikeWeight=function handleLikeWeight(event){setLikeWeight(event.target.value);};var handleShareWeight=function handleShareWeight(event){setShareWeight(event.target.value);};handleData(choosenSentiment,'comments');var d3Container=useRef(null);useEffect(function(){d3.select(\".root_netsentiment\").selectAll('*').remove();var margin={top:30,right:10,bottom:10,left:60},width=400-margin.left-margin.right,height=200-margin.top-margin.bottom;//var values = postData.map(function (d) {return d.value})\nvar values=postData.map(function(d){return(d.pos-d.neg)*(useComment?commentWeight*d.comment:1)*(useLike?likeWeight*d.like:1)*(useShare?shareWeight*d.share:1);});var keys=postData.map(function(d){return d.name;});var maxHeight=d3.max(values);var minHeight=d3.min(values);//set y scale\nvar yScale=d3.scaleLinear().rangeRound([0,height]).domain([maxHeight,-maxHeight]);//add x axis\nvar xScale=d3.scaleBand().rangeRound([0,width]).padding(0.5).domain(keys);var yAxisScale=d3.axisLeft(yScale).tickFormat(function(d){return parseInt(d);});var xAxisScale=d3.axisBottom(xScale);/*.tickFormat(\"\");remove tick label*/var divTooltip=d3.select('body').append('div').attr('class','toolTip').attr('font-size','100px');var svg=d3.select(d3Container.current).attr('class','root_netsentiment').append(\"svg\").attr(\"width\",width+margin.left+margin.right).attr(\"height\",height+margin.top+margin.bottom).append(\"g\")//add group to leave margin for axis\n.attr(\"transform\",\"translate(\"+margin.left+\",\"+margin.top+\")\");var bars=svg.selectAll(\"rect\").data(postData).enter().append(\"rect\").attr(\"x\",function(d,i){return xScale(d.name);}).attr(\"y\",function(d){if(d.pos-d.neg<0){return height/2;}else{return yScale((d.pos-d.neg)*(useComment?commentWeight*d.comment:1)*(useLike?likeWeight*d.like:1)*(useShare?shareWeight*d.share:1));}})//for bottom to top\n.attr(\"width\",xScale.bandwidth()/*width/dataset.length-barpadding*/).attr(\"height\",function(d){return height/2-yScale(Math.abs((d.pos-d.neg)*(useComment?commentWeight*d.comment:1)*(useLike?likeWeight*d.like:1)*(useShare?shareWeight*d.share:1)));}).attr(\"fill-opacity\",function(d){return hover.length===0?1:hover.includes(d.name)?1:0.5;}).attr(\"fill\",function(d){return d.pos-d.neg>0?'#63A37B':'rgb(241, 86, 69)';}).style(\"cursor\",\"pointer\").on('mousemove',function(d){divTooltip.style('left',d3.event.pageX+10+'px').style('top',d3.event.pageY-25+'px').style('display','inline-block').html('<strong>'+d.name+'</strong>'+'<br/> Net sentiment: '+(d.pos-d.neg)*(useComment?commentWeight*d.comment:1)*(useLike?likeWeight*d.like:1)*(useShare?shareWeight*d.share:1));}).on('mouseout',function(d){divTooltip.style('display','none');});//add x and y axis\nvar yAxis=svg.append(\"g\").attr(\"class\",\"y axis\").call(yAxisScale).append(\"text\").attr(\"transform\",\"rotate(-90)\").attr(\"y\",6).attr(\"dy\",\".71em\").style(\"text-anchor\",\"end\").style(\"fill\",\"#4d4d4d\").text(\"Net Sentiment\");svg.append(\"g\").attr(\"class\",\"x axis\").call(xAxisScale).attr(\"transform\",\"translate(0,\"+height/2+\")\").selectAll(\"text\").style(\"text-anchor\",\"end\").attr(\"dx\",\"1.2em\").attr(\"dy\",\"1em\").attr('overflow','visible').attr(\"transform\",\"rotate(-45)\").style('font-size','8px')//.style('text-decoration', 'underline')\n.attr('fill','#4d4d4d').style('cursor','pointer').on('mouseover',function(d){d3.select(this).style('font-size','12px');}).on('mouseout',function(d){d3.select(this).style('font-size','8px');});//.call(wrap, 0)\nfunction wrap(text,width){text.each(function(){var text=d3.select(this),words=text.text().split(/\\s+/).reverse(),word,line=[],lineNumber=0,lineHeight=1,// ems\ny=text.attr(\"y\")-(words.length+1)*4,dy=parseFloat(text.attr(\"dy\")),tspan=text.text(null).append(\"tspan\").attr(\"x\",0).attr(\"y\",y).attr(\"dy\",dy+\"em\");while(word=words.pop()){line.push(word);tspan.text(line.join(\" \"));if(tspan.node().getComputedTextLength()>width){line.pop();tspan.text(line.join(\" \"));line=[word];tspan=text.append(\"tspan\").attr(\"x\",0).attr(\"y\",y).attr(\"dy\",++lineNumber*lineHeight+dy+\"em\").text(word);}}});}/*\n        var margin = {top: 30, right: 10, bottom: 50, left: 50},\n        width = 150,\n        height = 150;\n\t\t\n        var data = [{value: 10, dataset:\"barbaz\"},\n        {value: 40, dataset:\"barbar\"},\n        {value: -10, dataset:\"foobaz\"},\n        {value: 50, dataset:\"foobar\"},\n        ];\n\n        // Add svg to\n        var svg = d3.select(d3Container.current)\n        .attr('class', 'root_netsentiment')\n        .append('svg')\n        .attr('width', width + margin.left + margin.right)\n        .attr('height', height + margin.top + margin.bottom)\n        .append('g')\n        .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n        // set the ranges\n        var y = d3.scaleBand()\n            .range([height, 0])\n            .padding(0.1);\n\n        var x = d3.scaleLinear()\n            //.range([0, width])\n            .rangeRound([margin.left, width - margin.right])\n\n        // Scale the range of the data in the domains\n        x.domain(d3.extent(post_data, function (d) {return d.value;}));\n        \n        y.domain(post_data.map(function (d) {\n            return d.name;\n        }));\n\n        var xAxis = d3.axisBottom(x)\n        .ticks(5)\n\n        var yAxis = d3.axisRight(y)\n\n        // append the rectangles for the bar chart\n        svg.selectAll(\".bar\")\n            .data(post_data)\n            .enter().append(\"rect\")\n            .attr(\"class\", function (d) {\n                return \"bar bar--\" + (d.value < 0 ? \"negative\" : \"positive\");\n            })\n            .attr(\"x\", function (d) {\n                return x(Math.min(0, d.value));\n            })\n            .attr(\"y\", function (d) {\n                return y(d.name);\n            })\n            .attr(\"width\", function (d) {\n                return Math.abs(x(d.value) - x(0));\n            })\n            .attr(\"height\", y.bandwidth());\n\n        // add the x Axis\n        svg.append(\"g\")\n            .attr(\"class\", \"x axis\")\n            .attr(\"transform\", \"translate(0,\" + height + \")\")\n            .call(xAxis)\n            .selectAll(\".x.axis text\")\n            .style(\"fill\",\"#4d4d4d\")\n\n        // add the y Axis\n        svg.append(\"g\")\n            .attr(\"class\", \"y axis\")\n            .attr(\"transform\", \"translate(\" + x(0) + \",0)\")\n            .call(yAxis)\n            .selectAll(\".y.axis text\")\n            .style(\"fill\",\"#4d4d4d\")\n\n       */},[choosenSentiment,hover,useComment,useLike,useShare,commentWeight,likeWeight,shareWeight]);// close useeffect\nreturn/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"NetContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"graphContainer\",children:/*#__PURE__*/_jsx(\"svg\",{id:\"netSentiment\",width:400,height:300,ref:d3Container})}),/*#__PURE__*/_jsxs(\"div\",{className:\"textContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"NetHeadline\",children:\"Net Sentiment =\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"NetFormula\",children:[\"(Positive sentiment - Negative sentiment) *\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"span\",{style:useComment?{opacity:1}:{opacity:0.5},children:[commentWeight,\" x Comments\"]}),\" *\",/*#__PURE__*/_jsxs(\"span\",{style:useLike?{opacity:1}:{opacity:0.5},children:[likeWeight,\" x Likes\"]}),\"  *\",/*#__PURE__*/_jsxs(\"span\",{style:useShare?{opacity:1}:{opacity:0.5},children:[shareWeight,\" x Shares\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"AllCheckboxContainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:useComment?'CheckboxActive':'CheckboxInactive',children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"foo\",value:\"com\",id:\"foo_com\",checked:useComment,onChange:function onChange(){return setUseComment(!useComment);}}),/*#__PURE__*/_jsx(\"label\",{className:\"checkLabel\",for:\"foo_com\",children:\"Comment\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"weightText\",children:\"Change weight: \"}),/*#__PURE__*/_jsx(\"input\",{className:\"weightInput\",type:\"number\",onChange:handleCommentWeight,value:commentWeight})]}),/*#__PURE__*/_jsxs(\"div\",{className:useLike?'CheckboxActive':'CheckboxInactive',children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"foo\",value:\"com\",id:\"foo_com\",checked:useLike,onChange:function onChange(){return setUseLike(!useLike);}}),/*#__PURE__*/_jsx(\"label\",{className:\"checkLabel\",for:\"foo_com\",children:\"Likes\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"weightText\",children:\"Change weight: \"}),/*#__PURE__*/_jsx(\"input\",{className:\"weightInput\",type:\"number\",onChange:handleLikeWeight,value:likeWeight})]}),/*#__PURE__*/_jsxs(\"div\",{className:useShare?'CheckboxActive':'CheckboxInactive',children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"foo\",value:\"com\",id:\"foo_com\",checked:useShare,onChange:function onChange(){return setUseShare(!useShare);}}),/*#__PURE__*/_jsx(\"label\",{className:\"checkLabel\",for:\"foo_com\",children:\"Shares\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"weightText\",children:\"Change weight: \"}),/*#__PURE__*/_jsx(\"input\",{className:\"weightInput\",type:\"number\",onChange:handleShareWeight,value:shareWeight})]})]})]})]})});};export default NetSentiment;","map":{"version":3,"sources":["/Users/lovisaforsberg/MS_vis/ms_viz/src/components/netsentiment.js"],"names":["React","useContext","useEffect","useRef","useReducer","useState","createContext","d3","SentimentContext","HoverContext","NetSentiment","SentSentimentContext","choosenSentiment","setChoosenSentiment","SentHoverContext","hover","setHover","commentWeight","setCommentWeight","likeWeight","setLikeWeight","shareWeight","setShareWeight","useComment","setUseComment","useLike","setUseLike","useShare","setUseShare","postData","handleData","data","variable","push","comment","comments","like","likes","share","shares","name","pos","neg","followers","value","children","forEach","child","handleCommentWeight","event","target","handleLikeWeight","handleShareWeight","d3Container","select","selectAll","remove","margin","top","right","bottom","left","width","height","values","map","d","keys","maxHeight","max","minHeight","min","yScale","scaleLinear","rangeRound","domain","xScale","scaleBand","padding","yAxisScale","axisLeft","tickFormat","parseInt","xAxisScale","axisBottom","divTooltip","append","attr","svg","current","bars","enter","i","bandwidth","Math","abs","length","includes","style","on","pageX","pageY","html","yAxis","call","text","wrap","each","words","split","reverse","word","line","lineNumber","lineHeight","y","dy","parseFloat","tspan","pop","join","node","getComputedTextLength","opacity"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useRef, useReducer, useState, createContext } from \"react\";\nimport * as d3 from 'd3'\nimport {SentimentContext} from '../App'\nimport {HoverContext} from '../App'\nimport '../style/netsentiment.css'\n\n\nconst NetSentiment = () =>{\n\n    const SentSentimentContext = useContext(SentimentContext);\n    const {choosenSentiment, setChoosenSentiment} = SentSentimentContext\n    //const [postData, setPostData] = useState([])\n\n    const SentHoverContext = useContext(HoverContext);\n    const {hover, setHover} = SentHoverContext\n\n    // weights\n    const [commentWeight, setCommentWeight] = useState(1)\n    const [likeWeight, setLikeWeight] = useState(1)\n    const [shareWeight, setShareWeight] = useState(1)\n\n    const [useComment, setUseComment] = useState(true)\n    const [useLike, setUseLike] = useState(true)\n    const [useShare, setUseShare] = useState(true)\n\n\n\n    var postData = []\n    const handleData = (data, variable) =>{\n       \n        if (!('children' in data)){\n            if (variable == 'comments'){\n                postData.push({\n                    //value: (data.pos-data.neg)*data.comments, name:data.name\n                    comment:data.comments, \n                    like: data.likes, \n                    share: data.shares, \n                    name: data.name,\n                    pos:data.pos,\n                    neg:data.neg,\n                    followers: data.followers\n                })\n            }\n            if (variable == 'likes'){\n                postData.push({\n                    value: (data.pos-data.neg)*data.likes, name:data.name\n                })\n            }\n        }\n        else{\n            data.children.forEach(child =>{\n                handleData(child, variable)\n            })\n        }\n    }\n\n\n    const handleCommentWeight = event => {\n        setCommentWeight(event.target.value);\n      };\n    const handleLikeWeight = event => {\n        setLikeWeight(event.target.value);\n      };\n    const handleShareWeight = event => {\n        setShareWeight(event.target.value);\n      };\n\n\n    handleData(choosenSentiment, 'comments')\n\n\n    const d3Container = useRef(null)\n\n    useEffect(()=>{\n\n        d3.select(\".root_netsentiment\").selectAll('*').remove()\n\n        var margin = {top: 30, right: 10, bottom: 10, left: 60},\n        width = 400 - margin.left - margin.right,\n        height = 200 - margin.top - margin.bottom;\n\n        //var values = postData.map(function (d) {return d.value})\n        var values = postData.map(function (d) {return (d.pos-d.neg)*((useComment?commentWeight*d.comment:1))\n                                                                *((useLike?likeWeight*d.like:1))\n                                                                *((useShare?shareWeight*d.share:1))\n                                                })\n\n        var keys = postData.map(function (d) {return d.name})\n        \n        var maxHeight=d3.max(values);\n        var minHeight=d3.min(values)  \n\n    \n    //set y scale\n\tvar yScale = d3.scaleLinear()\n    .rangeRound([0,height])\n    .domain([maxHeight,-maxHeight])\n\t\n    //add x axis\n\tvar xScale = d3.scaleBand()\n    .rangeRound([0,width])\n    .padding(0.5)\n\t.domain(keys)\n\n    var yAxisScale = d3.axisLeft(yScale)\n    .tickFormat(function(d) { return parseInt(d) });\n\n    \n    var xAxisScale = d3.axisBottom(xScale);/*.tickFormat(\"\");remove tick label*/\n\n    var divTooltip = d3\n        .select('body')\n        .append('div')\n        .attr('class', 'toolTip')\n        .attr('font-size', '100px')\n\t\n\n    var svg = d3.select(d3Container.current)\n                .attr('class', 'root_netsentiment')\n                .append(\"svg\")\n\t\t\t\t.attr(\"width\",width+margin.left+margin.right)\n\t\t\t\t.attr(\"height\",height+margin.top+margin.bottom)\n\t\t\t\t.append(\"g\")  //add group to leave margin for axis\n\t\t\t\t.attr(\"transform\",\"translate(\"+margin.left+\",\"+margin.top+\")\");\n\n    var bars = svg.selectAll(\"rect\")\n                .data(postData)\n                .enter()\n                .append(\"rect\")\n                .attr(\"x\",function(d,i){return xScale(d.name);})\n                .attr(\"y\",function(d){if((d.pos-d.neg)<0){return height/2;}\n                                else{return yScale(\n                                    ((d.pos-d.neg)*((useComment?commentWeight*d.comment:1))\n                                    *((useLike?likeWeight*d.like:1))\n                                    *((useShare?shareWeight*d.share:1)))\n                                    );}})//for bottom to top\n                \n                .attr(\"width\", xScale.bandwidth()/*width/dataset.length-barpadding*/)\n                .attr(\"height\", function(d){return height/2 -yScale(Math.abs(\n                    (d.pos-d.neg)*((useComment?commentWeight*d.comment:1))\n                    *((useLike?likeWeight*d.like:1))\n                    *((useShare?shareWeight*d.share:1))\n                    ));})\n\n                .attr(\"fill-opacity\", \n                    (d)=> hover.length === 0 ? 1 : hover.includes(d.name) ? 1 : 0.5\n                )\n                \n                .attr(\"fill\",function(d){return d.pos-d.neg > 0 ? '#63A37B' : 'rgb(241, 86, 69)'})\n                .style(\"cursor\", \"pointer\")\n                .on('mousemove', function(d){\n                    divTooltip\n                    .style('left', d3.event.pageX+10+'px')\n                    .style('top', d3.event.pageY-25+'px')\n                    .style('display', 'inline-block')\n                    .html('<strong>'+d.name+'</strong>'+'<br/> Net sentiment: '+\n                    ((d.pos-d.neg)*((useComment?commentWeight*d.comment:1))\n                                    *((useLike?likeWeight*d.like:1))\n                                    *((useShare?shareWeight*d.share:1)))\n                    )\n                })\n                .on('mouseout', function(d){\n                    divTooltip.style('display', 'none')\n                })\n                        \n\t\n\t//add x and y axis\n\tvar yAxis = svg.append(\"g\")\n        .attr(\"class\", \"y axis\")\n        .call(yAxisScale)\n        .append(\"text\")\n        .attr(\"transform\", \"rotate(-90)\")\n        .attr(\"y\", 6)\n        .attr(\"dy\", \".71em\")\n        .style(\"text-anchor\", \"end\")\n        .style(\"fill\", \"#4d4d4d\")\n        .text(\"Net Sentiment\")\n    \n\n\t\n\tsvg.append(\"g\")\n        .attr(\"class\", \"x axis\")\n        .call(xAxisScale)\n        .attr(\"transform\", \"translate(0,\"+height/2+\")\")\n        .selectAll(\"text\")\n        .style(\"text-anchor\", \"end\")\n        .attr(\"dx\", \"1.2em\")\n        .attr(\"dy\", \"1em\")\n        .attr('overflow', 'visible')\n        .attr(\"transform\", \"rotate(-45)\")\n        .style('font-size', '8px')\n        //.style('text-decoration', 'underline')\n        .attr('fill', '#4d4d4d')\n        .style('cursor', 'pointer')\n        .on('mouseover', function(d){d3.select(this).style('font-size', '12px')})\n        .on('mouseout', function(d){d3.select(this).style('font-size', '8px')})\n\n        //.call(wrap, 0)\n        \n    \n\t\n\n\n        function wrap(text, width) {\n            text.each(function () {\n                var text = d3.select(this),\n                    words = text.text().split(/\\s+/).reverse(),\n                    word,\n                    line = [],\n                    lineNumber = 0,\n                    lineHeight = 1, // ems\n                    y = text.attr(\"y\")-((words.length+1)*4),\n                    dy = parseFloat(text.attr(\"dy\")),\n                    tspan = text.text(null).append(\"tspan\").attr(\"x\", 0).attr(\"y\", y).attr(\"dy\", dy + \"em\");\n                while (word = words.pop()) {\n                    line.push(word);\n                    tspan.text(line.join(\" \"));\n                    if (tspan.node().getComputedTextLength() > width) {\n                        line.pop();\n                        tspan.text(line.join(\" \"));\n                        line = [word];\n                        tspan = text.append(\"tspan\").attr(\"x\", 0).attr(\"y\", y).attr(\"dy\", ++lineNumber * lineHeight + dy + \"em\").text(word);\n                    }\n                }\n            });\n          }\n     \n\n\n\n\n        /*\n        var margin = {top: 30, right: 10, bottom: 50, left: 50},\n        width = 150,\n        height = 150;\n\t\t\n        var data = [{value: 10, dataset:\"barbaz\"},\n        {value: 40, dataset:\"barbar\"},\n        {value: -10, dataset:\"foobaz\"},\n        {value: 50, dataset:\"foobar\"},\n        ];\n\n        // Add svg to\n        var svg = d3.select(d3Container.current)\n        .attr('class', 'root_netsentiment')\n        .append('svg')\n        .attr('width', width + margin.left + margin.right)\n        .attr('height', height + margin.top + margin.bottom)\n        .append('g')\n        .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n        // set the ranges\n        var y = d3.scaleBand()\n            .range([height, 0])\n            .padding(0.1);\n\n        var x = d3.scaleLinear()\n            //.range([0, width])\n            .rangeRound([margin.left, width - margin.right])\n\n        // Scale the range of the data in the domains\n        x.domain(d3.extent(post_data, function (d) {return d.value;}));\n        \n        y.domain(post_data.map(function (d) {\n            return d.name;\n        }));\n\n        var xAxis = d3.axisBottom(x)\n        .ticks(5)\n\n        var yAxis = d3.axisRight(y)\n\n        // append the rectangles for the bar chart\n        svg.selectAll(\".bar\")\n            .data(post_data)\n            .enter().append(\"rect\")\n            .attr(\"class\", function (d) {\n                return \"bar bar--\" + (d.value < 0 ? \"negative\" : \"positive\");\n            })\n            .attr(\"x\", function (d) {\n                return x(Math.min(0, d.value));\n            })\n            .attr(\"y\", function (d) {\n                return y(d.name);\n            })\n            .attr(\"width\", function (d) {\n                return Math.abs(x(d.value) - x(0));\n            })\n            .attr(\"height\", y.bandwidth());\n\n        // add the x Axis\n        svg.append(\"g\")\n            .attr(\"class\", \"x axis\")\n            .attr(\"transform\", \"translate(0,\" + height + \")\")\n            .call(xAxis)\n            .selectAll(\".x.axis text\")\n            .style(\"fill\",\"#4d4d4d\")\n\n        // add the y Axis\n        svg.append(\"g\")\n            .attr(\"class\", \"y axis\")\n            .attr(\"transform\", \"translate(\" + x(0) + \",0)\")\n            .call(yAxis)\n            .selectAll(\".y.axis text\")\n            .style(\"fill\",\"#4d4d4d\")\n\n       */ \n\n    }, [choosenSentiment, \n        hover, \n        useComment, \n        useLike, \n        useShare, \n        commentWeight,\n        likeWeight,\n        shareWeight]) // close useeffect\n\n    return(\n        <>\n        {/*\n        <div className='btnContainer'>\n          <button id='cha_button' className='groupButtonActive' onClick={()=>handleChangeData(choosenSentiment,'comments')}>Comments</button>\n          <button id='cat_button' className='groupButtonInactive' onClick={()=>handleChangeData(choosenSentiment,'likes')}>Likes</button>\n        </div>\n        */}\n            <div className='NetContainer'>\n                <div className=\"graphContainer\">\n                    <svg id='netSentiment' width={400} height={300} ref={d3Container}></svg> \n                </div>\n\n                <div className='textContainer'>\n                    <div className='NetHeadline'>Net Sentiment =</div>\n                    <div className='NetFormula'>(Positive sentiment - Negative sentiment) *<br/>\n                                        <span style={useComment?{opacity:1}:{opacity:0.5}}>{commentWeight} x Comments</span> *\n                                        <span style={useLike?{opacity:1}:{opacity:0.5}}>{likeWeight} x Likes</span>  * \n                                        <span style={useShare?{opacity:1}:{opacity:0.5}}>{shareWeight} x Shares</span>\n                    </div>\n\n                    <div className=\"AllCheckboxContainer\">\n                        <div className={useComment?'CheckboxActive':'CheckboxInactive'}>\n                            <div>\n                                <input type=\"checkbox\" \n                                        name=\"foo\" \n                                        value=\"com\" \n                                        id=\"foo_com\"\n                                        checked={useComment}\n                                        onChange={()=>setUseComment(!(useComment))}/>\n                                <label className='checkLabel' for=\"foo_com\">Comment</label>\n                            </div>\n\n                            \n                            <div className='weightText'>Change weight: </div>\n                            {/*<button className='weightBtn'>-</button>*/}\n                            <input className='weightInput' \n                                    type=\"number\" \n                                    onChange={handleCommentWeight}\n                                    value={commentWeight}\n                                    />\n                        \n                        </div>\n\n                        <div className={useLike?'CheckboxActive':'CheckboxInactive'}>\n                            <div>\n                                <input type=\"checkbox\" \n                                        name=\"foo\" \n                                        value=\"com\" \n                                        id=\"foo_com\"\n                                        checked={useLike}\n                                        onChange={()=>setUseLike(!(useLike))}/>\n                                <label className='checkLabel' for=\"foo_com\">Likes</label>\n                            </div>\n\n                            \n                            <div className='weightText'>Change weight: </div>\n                            {/*<button className='weightBtn'>-</button>*/}\n                            <input className='weightInput' \n                                    type=\"number\" \n                                    onChange={handleLikeWeight}\n                                    value={likeWeight}\n                                    />\n                        \n                        </div>\n\n                        <div className={useShare?'CheckboxActive':'CheckboxInactive'}>\n                            <div>\n                                <input type=\"checkbox\" \n                                        name=\"foo\" \n                                        value=\"com\" \n                                        id=\"foo_com\"\n                                        checked={useShare}\n                                        onChange={()=>setUseShare(!(useShare))}/>\n                                <label className='checkLabel' for=\"foo_com\">Shares</label>\n                            </div>\n\n                            \n                            <div className='weightText'>Change weight: </div>\n                            {/*<button className='weightBtn'>-</button>*/}\n                            <input className='weightInput' \n                                    type=\"number\" \n                                    onChange={handleShareWeight}\n                                    value={shareWeight}\n                                    />\n                        \n                        </div>\n\n                    </div>\n\n\n                </div>\n            </div>\n           \n\n        </>\n    )\n}\n\nexport default NetSentiment"]},"metadata":{},"sourceType":"module"}