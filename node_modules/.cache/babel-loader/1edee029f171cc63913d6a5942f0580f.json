{"ast":null,"code":"var _jsxFileName = \"/Users/lovisaforsberg/MS_vis/ms_viz/src/components/netsentiment.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useRef, useReducer, useState, createContext } from \"react\";\nimport * as d3 from 'd3';\nimport { SentimentContext } from '../App';\nimport { HoverContext } from '../App';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst NetSentiment = () => {\n  _s();\n\n  const d3Container = useRef(null);\n  useEffect(() => {\n    var barHeight = 25;\n    var height = Math.ceil((data.length + 0.1) * barHeight) + margin.top + margin.bottom;\n    var margin = {\n      top: 30,\n      right: 60,\n      bottom: 10,\n      left: 60\n    };\n\n    var d3 = require(\"d3@6\");\n\n    var format = d3.format(metric === \"absolute\" ? \"+,d\" : \"+,.0%\");\n    var tickFormat = metric === \"absolute\" ? d3.formatPrefix(\"+.1\", 1e6) : format;\n    var x = d3.scaleLinear().domain(d3.extent(data, d => d.value)).rangeRound([margin.left, width - margin.right]);\n    var y = d3.scaleBand().domain(d3.range(data.length)).rangeRound([margin.top, height - margin.bottom]).padding(0.1);\n\n    var xAxis = g => g.attr(\"transform\", `translate(0,${margin.top})`).call(d3.axisTop(x).ticks(width / 80).tickFormat(tickFormat)).call(g => g.select(\".domain\").remove());\n\n    var yAxis = g => g.attr(\"transform\", `translate(${x(0)},0)`).call(d3.axisLeft(y).tickFormat(i => data[i].name).tickSize(0).tickPadding(6)).call(g => g.selectAll(\".tick text\").filter(i => data[i].value < 0).attr(\"text-anchor\", \"start\").attr(\"x\", 6)); // CHART\n\n\n    const svg = d3.select(d3Container.current).attr('class', 'root_netsentiment').attr(\"viewBox\", [0, 0, width, height]).append('svg');\n    svg.append(\"g\").selectAll(\"rect\").data(data).join(\"rect\").attr(\"fill\", d => d3.schemeSet1[d.value > 0 ? 1 : 0]).attr(\"x\", d => x(Math.min(d.value, 0))).attr(\"y\", (d, i) => y(i)).attr(\"width\", d => Math.abs(x(d.value) - x(0))).attr(\"height\", y.bandwidth());\n    svg.append(\"g\").attr(\"font-family\", \"sans-serif\").attr(\"font-size\", 10).selectAll(\"text\").data(data).join(\"text\").attr(\"text-anchor\", d => d.value < 0 ? \"end\" : \"start\").attr(\"x\", d => x(d.value) + Math.sign(d.value - 0) * 4).attr(\"y\", (d, i) => y(i) + y.bandwidth() / 2).attr(\"dy\", \"0.35em\").text(d => format(d.value));\n    svg.append(\"g\").call(xAxis);\n    svg.append(\"g\").call(yAxis);\n    return svg.node();\n  }); // close useeffect\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"svg\", {\n      id: \"netSentiment\",\n      ref: d3Container\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n\n_s(NetSentiment, \"W4i3Ntv1V7JhLIB1f9IS/+wu8BI=\");\n\n_c = NetSentiment;\nexport default NetSentiment;\n\nvar _c;\n\n$RefreshReg$(_c, \"NetSentiment\");","map":{"version":3,"sources":["/Users/lovisaforsberg/MS_vis/ms_viz/src/components/netsentiment.js"],"names":["React","useContext","useEffect","useRef","useReducer","useState","createContext","d3","SentimentContext","HoverContext","NetSentiment","d3Container","barHeight","height","Math","ceil","data","length","margin","top","bottom","right","left","require","format","metric","tickFormat","formatPrefix","x","scaleLinear","domain","extent","d","value","rangeRound","width","y","scaleBand","range","padding","xAxis","g","attr","call","axisTop","ticks","select","remove","yAxis","axisLeft","i","name","tickSize","tickPadding","selectAll","filter","svg","current","append","join","schemeSet1","min","abs","bandwidth","sign","text","node"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useRef, useReducer, useState, createContext } from \"react\";\nimport * as d3 from 'd3'\nimport {SentimentContext} from '../App'\nimport {HoverContext} from '../App'\n\n\nconst NetSentiment = () =>{\n\n    const d3Container = useRef(null)\n\n    useEffect(()=>{\n\n        var barHeight = 25\n        var height = Math.ceil((data.length + 0.1) * barHeight) + margin.top + margin.bottom\n        var margin = ({top: 30, right: 60, bottom: 10, left: 60})\n        var d3 = require(\"d3@6\")\n\n        var format = d3.format(metric === \"absolute\" ? \"+,d\" : \"+,.0%\")\n        var tickFormat = metric === \"absolute\" ? d3.formatPrefix(\"+.1\", 1e6) : format\n\n        var x = d3.scaleLinear()\n        .domain(d3.extent(data, d => d.value))\n        .rangeRound([margin.left, width - margin.right])\n\n        var y = d3.scaleBand()\n        .domain(d3.range(data.length))\n        .rangeRound([margin.top, height - margin.bottom])\n        .padding(0.1)\n\n        var xAxis = g => g\n        .attr(\"transform\", `translate(0,${margin.top})`)\n        .call(d3.axisTop(x).ticks(width / 80).tickFormat(tickFormat))\n        .call(g => g.select(\".domain\").remove())\n\n        var yAxis = g => g\n        .attr(\"transform\", `translate(${x(0)},0)`)\n        .call(d3.axisLeft(y).tickFormat(i => data[i].name).tickSize(0).tickPadding(6))\n        .call(g => g.selectAll(\".tick text\").filter(i => data[i].value < 0)\n        .attr(\"text-anchor\", \"start\")\n        .attr(\"x\", 6))\n\n        // CHART\n            \n        const svg = d3.select(d3Container.current)\n            .attr('class', 'root_netsentiment')\n            .attr(\"viewBox\", [0, 0, width, height])\n            .append('svg')\n\n        svg.append(\"g\")\n            .selectAll(\"rect\")\n            .data(data)\n            .join(\"rect\")\n            .attr(\"fill\", d => d3.schemeSet1[d.value > 0 ? 1 : 0])\n            .attr(\"x\", d => x(Math.min(d.value, 0)))\n            .attr(\"y\", (d, i) => y(i))\n            .attr(\"width\", d => Math.abs(x(d.value) - x(0)))\n            .attr(\"height\", y.bandwidth());\n\n        svg.append(\"g\")\n            .attr(\"font-family\", \"sans-serif\")\n            .attr(\"font-size\", 10)\n            .selectAll(\"text\")\n            .data(data)\n            .join(\"text\")\n            .attr(\"text-anchor\", d => d.value < 0 ? \"end\" : \"start\")\n            .attr(\"x\", d => x(d.value) + Math.sign(d.value - 0) * 4)\n            .attr(\"y\", (d, i) => y(i) + y.bandwidth() / 2)\n            .attr(\"dy\", \"0.35em\")\n            .text(d => format(d.value));\n\n        svg.append(\"g\")\n            .call(xAxis);\n\n        svg.append(\"g\")\n            .call(yAxis);\n\n        return svg.node();\n\n    }) // close useeffect\n\n    return(\n        <>\n            <svg id='netSentiment' ref={d3Container}></svg>\n\n        </>\n    )\n}\n\nexport default NetSentiment"]},"metadata":{},"sourceType":"module"}