{"ast":null,"code":"var _jsxFileName = \"/Users/lovisaforsberg/MS_vis/ms_viz/src/components/linechart.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useRef, useReducer, useState, createContext } from \"react\";\nimport * as d3 from 'd3';\nimport ReactTooltip from 'react-tooltip';\nimport '../style/linechart.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst LineChart = () => {\n  _s();\n\n  const d3Container = useRef(null);\n  const data = [{\n    id: 'pos',\n    values: [{\n      date: 'jan',\n      price: 20\n    }, {\n      date: 'feb',\n      price: 20\n    }, {\n      date: 'mars',\n      price: 20\n    }, {\n      date: 'april',\n      price: 20\n    }, {\n      date: 'may',\n      price: 20\n    }, {\n      date: 'june',\n      price: 20\n    }]\n  }, {\n    id: 'neg',\n    values: [{\n      date: 'jan',\n      price: 30\n    }, {\n      date: 'feb',\n      price: 30\n    }, {\n      date: 'mars',\n      price: 30\n    }, {\n      date: 'april',\n      price: 30\n    }, {\n      date: 'may',\n      price: 30\n    }, {\n      date: 'june',\n      price: 30\n    }]\n  }, {\n    id: 'neu',\n    values: [{\n      date: 'jan',\n      price: 50\n    }, {\n      date: 'feb',\n      price: 50\n    }, {\n      date: 'mars',\n      price: 50\n    }, {\n      date: 'april',\n      price: 50\n    }, {\n      date: 'may',\n      price: 50\n    }, {\n      date: 'june',\n      price: 50\n    }]\n  }];\n  const months = ['jan', 'feb', 'mars', 'april', 'may', 'june'];\n  useEffect(() => {\n    d3.select(\".root_linechart\").selectAll('*').remove();\n    var width = 500;\n    var height = 300;\n    var margin = 50;\n    var duration = 250;\n    var lineOpacity = \"0.25\";\n    var lineOpacityHover = \"0.85\";\n    var otherLinesOpacityHover = \"0.1\";\n    var lineStroke = \"1.5px\";\n    var lineStrokeHover = \"2.5px\";\n    var circleOpacity = '0.85';\n    var circleOpacityOnLineHover = \"0.25\";\n    var circleRadius = 3;\n    var circleRadiusHover = 6;\n    /* Format Data */\n\n    var parseDate = d3.timeParse(\"%Y\");\n    data.forEach(function (d) {\n      d.values.forEach(function (d) {\n        d.date = parseDate(d.date);\n        d.price = +d.price;\n      });\n    });\n    /* Scale */\n\n    var xScale = d3.scaleTime().domain(d3.extent(data[0].values, d => d.date)).range([0, width - margin]);\n    var yScale = d3.scaleLinear().domain([0, d3.max(data[0].values, d => d.price)]).range([height - margin, 0]);\n    var color = d3.scaleOrdinal(d3.schemeCategory10);\n    /* Add SVG */\n\n    var svg = d3.select(d3Container.current).append(\"svg\").attr(\"width\", width + margin + \"px\").attr(\"height\", height + margin + \"px\").append('g').attr(\"transform\", `translate(${margin}, ${margin})`);\n    /* Add line into SVG */\n\n    var line = d3.line().x(d => xScale(d.date)).y(d => yScale(d.price));\n    let lines = svg.append('g').attr('class', 'lines');\n    lines.selectAll('.line-group').data(data).enter().append('g').attr('class', 'line-group').on(\"mouseover\", function (d, i) {\n      svg.append(\"text\").attr(\"class\", \"title-text\").style(\"fill\", color(i)).text(d.name).attr(\"text-anchor\", \"middle\").attr(\"x\", (width - margin) / 2).attr(\"y\", 5);\n    }).on(\"mouseout\", function (d) {\n      svg.select(\".title-text\").remove();\n    }).append('path').attr('class', 'line').attr('d', d => line(d.values)).style('stroke', (d, i) => color(i)).style('opacity', lineOpacity).on(\"mouseover\", function (d) {\n      d3.selectAll('.line').style('opacity', otherLinesOpacityHover);\n      d3.selectAll('.circle').style('opacity', circleOpacityOnLineHover);\n      d3.select(this).style('opacity', lineOpacityHover).style(\"stroke-width\", lineStrokeHover).style(\"cursor\", \"pointer\");\n    }).on(\"mouseout\", function (d) {\n      d3.selectAll(\".line\").style('opacity', lineOpacity);\n      d3.selectAll('.circle').style('opacity', circleOpacity);\n      d3.select(this).style(\"stroke-width\", lineStroke).style(\"cursor\", \"none\");\n    });\n    /* Add circles in the line */\n\n    lines.selectAll(\"circle-group\").data(data).enter().append(\"g\").style(\"fill\", (d, i) => color(i)).selectAll(\"circle\").data(d => d.values).enter().append(\"g\").attr(\"class\", \"circle\").on(\"mouseover\", function (d) {\n      d3.select(this).style(\"cursor\", \"pointer\").append(\"text\").attr(\"class\", \"text\").text(`${d.price}`).attr(\"x\", d => xScale(d.date) + 5).attr(\"y\", d => yScale(d.price) - 10);\n    }).on(\"mouseout\", function (d) {\n      d3.select(this).style(\"cursor\", \"none\").transition().duration(duration).selectAll(\".text\").remove();\n    }).append(\"circle\").attr(\"cx\", d => xScale(d.date)).attr(\"cy\", d => yScale(d.price)).attr(\"r\", circleRadius).style('opacity', circleOpacity).on(\"mouseover\", function (d) {\n      d3.select(this).transition().duration(duration).attr(\"r\", circleRadiusHover);\n    }).on(\"mouseout\", function (d) {\n      d3.select(this).transition().duration(duration).attr(\"r\", circleRadius);\n    });\n    /* Add Axis into SVG */\n\n    var xAxis = d3.axisBottom(xScale).ticks(5);\n    var yAxis = d3.axisLeft(yScale).ticks(5);\n    svg.append(\"g\").attr(\"class\", \"x axis\").attr(\"transform\", `translate(0, ${height - margin})`).call(xAxis);\n    svg.append(\"g\").attr(\"class\", \"y axis\").call(yAxis).append('text').attr(\"y\", 15).attr(\"transform\", \"rotate(-90)\").attr(\"fill\", \"#000\").text(\"Total values\");\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"svg\", {\n      id: \"lineChart\",\n      width: \"500\",\n      height: \"300\",\n      ref: d3Container\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n\n_s(LineChart, \"W4i3Ntv1V7JhLIB1f9IS/+wu8BI=\");\n\n_c = LineChart;\nexport default LineChart;\n\nvar _c;\n\n$RefreshReg$(_c, \"LineChart\");","map":{"version":3,"sources":["/Users/lovisaforsberg/MS_vis/ms_viz/src/components/linechart.js"],"names":["React","useContext","useEffect","useRef","useReducer","useState","createContext","d3","ReactTooltip","LineChart","d3Container","data","id","values","date","price","months","select","selectAll","remove","width","height","margin","duration","lineOpacity","lineOpacityHover","otherLinesOpacityHover","lineStroke","lineStrokeHover","circleOpacity","circleOpacityOnLineHover","circleRadius","circleRadiusHover","parseDate","timeParse","forEach","d","xScale","scaleTime","domain","extent","range","yScale","scaleLinear","max","color","scaleOrdinal","schemeCategory10","svg","current","append","attr","line","x","y","lines","enter","on","i","style","text","name","transition","xAxis","axisBottom","ticks","yAxis","axisLeft","call"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useRef, useReducer, useState, createContext } from \"react\";\nimport * as d3 from 'd3'\nimport ReactTooltip from 'react-tooltip';\nimport '../style/linechart.css'\n\nconst LineChart = () =>{\n\n    const d3Container = useRef(null)\n\n    const data =[\n        {id:'pos', values:[\n            {date:'jan', price: 20},\n            {date:'feb', price: 20},\n            {date:'mars', price: 20},\n            {date:'april', price: 20},\n            {date:'may', price: 20},\n            {date:'june', price: 20},\n        ]},\n        {id:'neg', values:[\n            {date:'jan', price: 30},\n            {date:'feb', price: 30},\n            {date:'mars', price: 30},\n            {date:'april', price: 30},\n            {date:'may', price: 30},\n            {date:'june', price: 30},\n        ]},\n        {id:'neu', values:[\n            {date:'jan', price: 50},\n            {date:'feb', price: 50},\n            {date:'mars', price: 50},\n            {date:'april', price: 50},\n            {date:'may', price: 50},\n            {date:'june', price: 50},\n        ]},\n\n    ]\n\n    const months = ['jan', 'feb', 'mars', 'april', 'may', 'june']\n\n    useEffect(()=>{\n\n    d3.select(\".root_linechart\").selectAll('*').remove()\n\n    var width = 500;\nvar height = 300;\nvar margin = 50;\nvar duration = 250;\n\nvar lineOpacity = \"0.25\";\nvar lineOpacityHover = \"0.85\";\nvar otherLinesOpacityHover = \"0.1\";\nvar lineStroke = \"1.5px\";\nvar lineStrokeHover = \"2.5px\";\n\nvar circleOpacity = '0.85';\nvar circleOpacityOnLineHover = \"0.25\"\nvar circleRadius = 3;\nvar circleRadiusHover = 6;\n\n\n/* Format Data */\nvar parseDate = d3.timeParse(\"%Y\");\ndata.forEach(function(d) { \n  d.values.forEach(function(d) {\n    d.date = parseDate(d.date);\n    d.price = +d.price;    \n  });\n});\n\n\n/* Scale */\nvar xScale = d3.scaleTime()\n  .domain(d3.extent(data[0].values, d => d.date))\n  .range([0, width-margin]);\n\nvar yScale = d3.scaleLinear()\n  .domain([0, d3.max(data[0].values, d => d.price)])\n  .range([height-margin, 0]);\n\nvar color = d3.scaleOrdinal(d3.schemeCategory10);\n\n/* Add SVG */\nvar svg = d3.select(d3Container.current).append(\"svg\")\n  .attr(\"width\", (width+margin)+\"px\")\n  .attr(\"height\", (height+margin)+\"px\")\n  .append('g')\n  .attr(\"transform\", `translate(${margin}, ${margin})`);\n\n\n/* Add line into SVG */\nvar line = d3.line()\n  .x(d => xScale(d.date))\n  .y(d => yScale(d.price));\n\nlet lines = svg.append('g')\n  .attr('class', 'lines');\n\nlines.selectAll('.line-group')\n  .data(data).enter()\n  .append('g')\n  .attr('class', 'line-group')  \n  .on(\"mouseover\", function(d, i) {\n      svg.append(\"text\")\n        .attr(\"class\", \"title-text\")\n        .style(\"fill\", color(i))        \n        .text(d.name)\n        .attr(\"text-anchor\", \"middle\")\n        .attr(\"x\", (width-margin)/2)\n        .attr(\"y\", 5);\n    })\n  .on(\"mouseout\", function(d) {\n      svg.select(\".title-text\").remove();\n    })\n  .append('path')\n  .attr('class', 'line')  \n  .attr('d', d => line(d.values))\n  .style('stroke', (d, i) => color(i))\n  .style('opacity', lineOpacity)\n  .on(\"mouseover\", function(d) {\n      d3.selectAll('.line')\n\t\t\t\t\t.style('opacity', otherLinesOpacityHover);\n      d3.selectAll('.circle')\n\t\t\t\t\t.style('opacity', circleOpacityOnLineHover);\n      d3.select(this)\n        .style('opacity', lineOpacityHover)\n        .style(\"stroke-width\", lineStrokeHover)\n        .style(\"cursor\", \"pointer\");\n    })\n  .on(\"mouseout\", function(d) {\n      d3.selectAll(\".line\")\n\t\t\t\t\t.style('opacity', lineOpacity);\n      d3.selectAll('.circle')\n\t\t\t\t\t.style('opacity', circleOpacity);\n      d3.select(this)\n        .style(\"stroke-width\", lineStroke)\n        .style(\"cursor\", \"none\");\n    });\n\n\n/* Add circles in the line */\nlines.selectAll(\"circle-group\")\n  .data(data).enter()\n  .append(\"g\")\n  .style(\"fill\", (d, i) => color(i))\n  .selectAll(\"circle\")\n  .data(d => d.values).enter()\n  .append(\"g\")\n  .attr(\"class\", \"circle\")  \n  .on(\"mouseover\", function(d) {\n      d3.select(this)     \n        .style(\"cursor\", \"pointer\")\n        .append(\"text\")\n        .attr(\"class\", \"text\")\n        .text(`${d.price}`)\n        .attr(\"x\", d => xScale(d.date) + 5)\n        .attr(\"y\", d => yScale(d.price) - 10);\n    })\n  .on(\"mouseout\", function(d) {\n      d3.select(this)\n        .style(\"cursor\", \"none\")  \n        .transition()\n        .duration(duration)\n        .selectAll(\".text\").remove();\n    })\n  .append(\"circle\")\n  .attr(\"cx\", d => xScale(d.date))\n  .attr(\"cy\", d => yScale(d.price))\n  .attr(\"r\", circleRadius)\n  .style('opacity', circleOpacity)\n  .on(\"mouseover\", function(d) {\n        d3.select(this)\n          .transition()\n          .duration(duration)\n          .attr(\"r\", circleRadiusHover);\n      })\n    .on(\"mouseout\", function(d) {\n        d3.select(this) \n          .transition()\n          .duration(duration)\n          .attr(\"r\", circleRadius);  \n      });\n\n\n/* Add Axis into SVG */\nvar xAxis = d3.axisBottom(xScale).ticks(5);\nvar yAxis = d3.axisLeft(yScale).ticks(5);\n\nsvg.append(\"g\")\n  .attr(\"class\", \"x axis\")\n  .attr(\"transform\", `translate(0, ${height-margin})`)\n  .call(xAxis);\n\nsvg.append(\"g\")\n  .attr(\"class\", \"y axis\")\n  .call(yAxis)\n  .append('text')\n  .attr(\"y\", 15)\n  .attr(\"transform\", \"rotate(-90)\")\n  .attr(\"fill\", \"#000\")\n  .text(\"Total values\");\n\n    })\n\n    return(\n        <>\n            <svg id='lineChart' width=\"500\" height=\"300\" ref={d3Container}></svg>\n        </>\n    )\n}\n\nexport default LineChart\n"]},"metadata":{},"sourceType":"module"}