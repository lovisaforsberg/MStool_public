{"ast":null,"code":"import _slicedToArray from\"/Users/lovisaforsberg/MS_vis/ms_viz/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useRef,useReducer,useState,createContext}from\"react\";import*as d3 from'd3';import ReactTooltip from'react-tooltip';import'../style/linechart.css';import{SentimentContext}from'../App';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var LineChart=function LineChart(){var SentSentimentContext=useContext(SentimentContext);var choosenSentiment=SentSentimentContext.choosenSentiment,setChoosenSentiment=SentSentimentContext.setChoosenSentiment;var d3Container=useRef(null);var _useState=useState(true),_useState2=_slicedToArray(_useState,2),showSentiment=_useState2[0],setShowSentiment=_useState2[1];//const [data, setGraphData] = useState([])\nfunction getRandomInt(min,max){min=Math.ceil(min);max=Math.floor(max);return Math.floor(Math.random()*(max-min)+min);//The maximum is exclusive and the minimum is inclusive\n}var handleOption=function handleOption(event){if(event.target.value==='sent'){setShowSentiment(true);}else{setShowSentiment(false);}};var sent_data=[{name:'pos',sent_name:'Positive',values:[{date:'August 2020',price:getRandomInt(15,40)},{date:'September 2020',price:getRandomInt(15,40)},{date:'October 2020',price:getRandomInt(15,40)},{date:'November 2020',price:getRandomInt(15,40)},{date:'December 2020',price:getRandomInt(15,40)},{date:'January 2021',price:getRandomInt(15,40)}]},{name:'neg',sent_name:'Negative',values:[{date:'August 2020',price:getRandomInt(2,18)},{date:'September 2020',price:getRandomInt(2,18)},{date:'October 2020',price:getRandomInt(2,18)},{date:'November 2020',price:getRandomInt(2,18)},{date:'December 2020',price:getRandomInt(2,18)},{date:'January 2021',price:getRandomInt(2,18)}]},{name:'neu',sent_name:'Neutral',values:[{date:'August 2020',price:'54'},{date:'September 2020',price:'55'},{date:'October 2020',price:'57'},{date:'November 2020',price:'53'},{date:'December 2020',price:'52'},{date:'January 2021',price:'59'}]}];var eng_data=[{name:'pos',eng_name:'Comments',values:[{date:'August 2020',price:getRandomInt(1,120)/100},{date:'September 2020',price:getRandomInt(1,120)/100},{date:'October 2020',price:getRandomInt(1,120)/100},{date:'November 2020',price:getRandomInt(1,120)/100},{date:'December 2020',price:getRandomInt(1,120)/100},{date:'January 2021',price:getRandomInt(1,120)/100}]},{name:'neg',eng_name:'Likes',values:[{date:'August 2020',price:getRandomInt(1,230)/100},{date:'September 2020',price:getRandomInt(1,230)/100},{date:'October 2020',price:getRandomInt(1,230)/100},{date:'November 2020',price:getRandomInt(1,230)/100},{date:'December 2020',price:getRandomInt(1,230)/100},{date:'January 2021',price:getRandomInt(1,230)/100}]},{name:'neu',eng_name:'Shares',values:[{date:'August 2020',price:getRandomInt(1,90)/100},{date:'September 2020',price:getRandomInt(1,90)/100},{date:'October 2020',price:getRandomInt(1,90)/100},{date:'November 2020',price:getRandomInt(1,90)/100},{date:'December 2020',price:getRandomInt(1,90)/100},{date:'January 2021',price:getRandomInt(1,90)/100}]}];//const months = ['jan', 'feb', 'mars', 'april', 'may', 'june']\nuseEffect(function(){var data=showSentiment?sent_data:eng_data;d3.select(\".root_linechart\").selectAll('*').remove();var width=400;var height=200;//var margin = 35;\nvar margin={top:5,right:10,bottom:15,left:35};var duration=250;var lineOpacity=\"0.25\";var lineOpacityHover=\"0.85\";var otherLinesOpacityHover=\"0.1\";var lineStroke=\"1.5px\";var lineStrokeHover=\"2.5px\";var circleOpacity='0.85';var circleOpacityOnLineHover=\"0.25\";var circleRadius=3;var circleRadiusHover=6;var months=data[0].values.map(function(value){return value.date;});/* Scale */var xScale=d3.scalePoint().domain(months).rangeRound([0,width-margin.left]);var yScale=d3.scaleLinear().domain([0,showSentiment?100:2.3]).range([height-margin.bottom,0]);var color=d3.scaleOrdinal(['#63A37B','#F15645','#7D7D7D']);var color_eng=d3.scaleOrdinal(['#005282','#336D90','#6692AC']);/* Add SVG */var svg=d3.select(d3Container.current).attr('class','root_linechart').append(\"svg\").attr(\"width\",width+margin.left+margin.right).attr(\"height\",height+margin.top+margin.bottom).append('g').attr(\"transform\",\"translate(\"+margin.left+\",\"+margin.top+\")\");var tooltip=d3.select('#tooltip');var tooltipLine=svg.append('line');var divTooltip=d3.select('body').append('div').attr('class','toolTip').attr('font-size','100px');/* Add line into SVG */var line=d3.line().x(function(d){return xScale(d.date);}).y(function(d){return yScale(d.price);});var lines=svg.append('g').attr('class','lines');lines.selectAll('.line-group').data(data).enter().append('g').attr('class','line-group').on(\"mouseover\",function(d,i){svg.append(\"text\").attr(\"class\",\"title-text\").style(\"fill\",showSentiment?color(i):color_eng(i)).text(showSentiment?d.sent_name:d.eng_name).attr(\"text-anchor\",\"middle\").attr(\"x\",(width-margin.left)/2).attr(\"y\",5);}).on(\"mouseout\",function(d){svg.select(\".title-text\").remove();}).append('path').attr('class','line').attr('d',function(d){return line(d.values);}).style('stroke',function(d,i){return showSentiment?color(i):color_eng(i);}).style('opacity',lineOpacity).on(\"mouseover\",function(d){d3.selectAll('.line').style('opacity',otherLinesOpacityHover);d3.selectAll('.circle').style('opacity',circleOpacityOnLineHover);d3.select(this).style('opacity',lineOpacityHover).style(\"stroke-width\",lineStrokeHover).style(\"cursor\",\"pointer\");}).on(\"mouseout\",function(d){d3.selectAll(\".line\").style('opacity',lineOpacity);d3.selectAll('.circle').style('opacity',circleOpacity);d3.select(this).style(\"stroke-width\",lineStroke).style(\"cursor\",\"none\");});/* Add circles in the line */lines.selectAll(\"circle-group\").data(data).enter().append(\"g\").style(\"fill\",function(d,i){return showSentiment?color(i):color_eng(i);}).selectAll(\"circle\").data(function(d){return d.values;}).enter().append(\"g\").attr(\"class\",\"circle\").on(\"mouseover\",/*\n  function(d) {\n      d3.select(this)     \n        .style(\"cursor\", \"pointer\")\n        .append(\"text\")\n        .attr(\"class\", \"text\")\n        .text(`${d.price}`)\n        .attr(\"x\", d => xScale(d.date) + 5)\n        .attr(\"y\", d => yScale(d.price) - 10);\n    })\n    */function(d){drawTooltip(d.date);/*\n    divTooltip\n    .style('left', d3.event.pageX+10+'px')\n    .style('top', d3.event.pageY-25+'px')\n    .style('display', 'inline-block')\n    .html(d.price)\n    */}).on(\"mouseout\",/*\n  function(d) {\n      d3.select(this)\n        .style(\"cursor\", \"none\")  \n        .transition()\n        .duration(duration)\n        .selectAll(\".text\").remove();\n    }*/function(d){removeTooltip();divTooltip.style('display','none');}).append(\"circle\").attr(\"cx\",function(d){return xScale(d.date);}).attr(\"cy\",function(d){return yScale(d.price);}).attr(\"r\",circleRadius).style('opacity',circleOpacity).on(\"mouseover\",function(d){d3.select(this).transition().duration(duration).attr(\"r\",circleRadiusHover);}).on(\"mouseout\",function(d){d3.select(this).transition().duration(duration).attr(\"r\",circleRadius);});/* Add Axis into SVG */var xAxis=d3.axisBottom(xScale).ticks(5);var yAxis=d3.axisLeft(yScale).ticks(5).tickFormat(function(d){return d+\"%\";});svg.append(\"g\").attr(\"class\",\"x axis\").attr(\"transform\",\"translate(0, \".concat(height-margin.bottom,\")\")).call(xAxis).selectAll(\".tick text\").call(wrap,20);svg.append(\"g\").attr(\"class\",\"y axis\").call(yAxis).append('text').attr(\"y\",15).attr('x',5).attr(\"text-anchor\",\"start\").attr(\"transform\",\"rotate(-0)\").attr(\"fill\",\"#000\").text(showSentiment?'Sentiment [%]':'Engagement rate [%]');function removeTooltip(){if(tooltip)tooltip.style('display','none');if(tooltipLine)tooltipLine.attr('stroke','none');}function drawTooltip(date){var pos=0;var neg=0;var neu=0;var values=[];data.forEach(function(element){if(element.name==='pos'){element.values.forEach(function(month){if(month.date===date){pos=month.price;values.push({name:'pos',eng_name:'Comments',value:month.price});}});}if(element.name==='neg'){element.values.forEach(function(month){if(month.date===date){neg=month.price;values.push({name:'neg',eng_name:'Likes',value:month.price});}});}if(element.name==='neu'){element.values.forEach(function(month){if(month.date===date){neu=month.price;values.push({name:'neu',eng_name:'Shares',value:month.price});}});}});values.sort(function(a,b){return b.value-a.value;});tooltipLine.attr('stroke','grey').attr('x1',xScale(date)).attr('x2',xScale(date)).attr('y1',0).attr('y2',height-margin.bottom);divTooltip.style('left',d3.event.pageX+10+'px').style('top',d3.event.pageY-25+'px').style('display','inline-block').html(showSentiment?values.map(function(item){return'<span class=dot_'+item.name+'></span> '+item.value+'% </br>';}):values.map(function(item){return'<span class=dot_'+item.eng_name+'></span> '+item.eng_name+': '+item.value+'% </br>';}));}function wrap(text,width){text.each(function(){var text=d3.select(this),words=text.text().split(/\\s+/).reverse(),word,line=[],lineNumber=0,lineHeight=1,// ems\ny=text.attr(\"y\")-(words.length+1)*4,dy=parseFloat(text.attr(\"dy\")),tspan=text.text(null).append(\"tspan\").attr(\"x\",0).attr(\"y\",y).attr(\"dy\",dy+\"em\");while(word=words.pop()){line.push(word);tspan.text(line.join(\" \"));if(tspan.node().getComputedTextLength()>width){line.pop();tspan.text(line.join(\" \"));line=[word];tspan=text.append(\"tspan\").attr(\"x\",0).attr(\"y\",y).attr(\"dy\",++lineNumber*lineHeight+dy+\"em\").text(word);}}});}},[choosenSentiment,showSentiment]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"lineContainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"line_infoContainer\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-info-circle bar_info\",\"data-tip\":true,\"data-for\":\"linechartInfo\"}),/*#__PURE__*/_jsx(ReactTooltip,{id:\"linechartInfo\",className:\"bar_infoTooltip\",place:\"top\",textColor:\"#4d4d4d\",backgroundColor:\"#FFDFC3\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"The graph shows the engagemet rate or sentiment for \",/*#__PURE__*/_jsx(\"strong\",{children:\"all posts\"}),\" in the chosen category or channel per month\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"linechartContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lineDropdownContainer\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"LinedropDown\",onChange:function onChange(e){return handleOption(e);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"sent\",children:\"Sentiment\"}),/*#__PURE__*/_jsx(\"option\",{value:\"eng\",children:\"Engagement\"})]})}),/*#__PURE__*/_jsx(\"svg\",{id:\"lineChart\",width:\"440\",height:\"220\",ref:d3Container})]})]})});};export default LineChart;","map":{"version":3,"sources":["/Users/lovisaforsberg/MS_vis/ms_viz/src/components/linechart.js"],"names":["React","useContext","useEffect","useRef","useReducer","useState","createContext","d3","ReactTooltip","SentimentContext","LineChart","SentSentimentContext","choosenSentiment","setChoosenSentiment","d3Container","showSentiment","setShowSentiment","getRandomInt","min","max","Math","ceil","floor","random","handleOption","event","target","value","sent_data","name","sent_name","values","date","price","eng_data","eng_name","data","select","selectAll","remove","width","height","margin","top","right","bottom","left","duration","lineOpacity","lineOpacityHover","otherLinesOpacityHover","lineStroke","lineStrokeHover","circleOpacity","circleOpacityOnLineHover","circleRadius","circleRadiusHover","months","map","xScale","scalePoint","domain","rangeRound","yScale","scaleLinear","range","color","scaleOrdinal","color_eng","svg","current","attr","append","tooltip","tooltipLine","divTooltip","line","x","d","y","lines","enter","on","i","style","text","drawTooltip","removeTooltip","transition","xAxis","axisBottom","ticks","yAxis","axisLeft","tickFormat","call","wrap","pos","neg","neu","forEach","element","month","push","sort","a","b","pageX","pageY","html","item","each","words","split","reverse","word","lineNumber","lineHeight","length","dy","parseFloat","tspan","pop","join","node","getComputedTextLength","e"],"mappings":"0JAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,CAA4BC,SAA5B,CAAuCC,MAAvC,CAA+CC,UAA/C,CAA2DC,QAA3D,CAAqEC,aAArE,KAA0F,OAA1F,CACA,MAAO,GAAKC,CAAAA,EAAZ,KAAoB,IAApB,CACA,MAAOC,CAAAA,YAAP,KAAyB,eAAzB,CACA,MAAO,wBAAP,CACA,OAAQC,gBAAR,KAA+B,QAA/B,C,6IAGA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAK,CAErB,GAAMC,CAAAA,oBAAoB,CAAGV,UAAU,CAACQ,gBAAD,CAAvC,CAFqB,GAGdG,CAAAA,gBAHc,CAG2BD,oBAH3B,CAGdC,gBAHc,CAGIC,mBAHJ,CAG2BF,oBAH3B,CAGIE,mBAHJ,CAKnB,GAAMC,CAAAA,WAAW,CAAGX,MAAM,CAAC,IAAD,CAA1B,CALmB,cAOuBE,QAAQ,CAAC,IAAD,CAP/B,wCAOZU,aAPY,eAOGC,gBAPH,eASnB;AAEA,QAASC,CAAAA,YAAT,CAAsBC,GAAtB,CAA2BC,GAA3B,CAAgC,CAC9BD,GAAG,CAAGE,IAAI,CAACC,IAAL,CAAUH,GAAV,CAAN,CACAC,GAAG,CAAGC,IAAI,CAACE,KAAL,CAAWH,GAAX,CAAN,CACA,MAAOC,CAAAA,IAAI,CAACE,KAAL,CAAWF,IAAI,CAACG,MAAL,IAAiBJ,GAAG,CAAGD,GAAvB,EAA8BA,GAAzC,CAAP,CAAsD;AACvD,CAED,GAAMM,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAAU,CAC7B,GAAGA,KAAK,CAACC,MAAN,CAAaC,KAAb,GAAsB,MAAzB,CAAgC,CAC9BX,gBAAgB,CAAC,IAAD,CAAhB,CACD,CAFD,IAGI,CAEFA,gBAAgB,CAAC,KAAD,CAAhB,CACD,CACF,CARD,CAUA,GAAMY,CAAAA,SAAS,CAAG,CAChB,CAACC,IAAI,CAAC,KAAN,CAAaC,SAAS,CAAC,UAAvB,CAAmCC,MAAM,CAAC,CACtC,CAACC,IAAI,CAAC,aAAN,CAAqBC,KAAK,CAAEhB,YAAY,CAAC,EAAD,CAAK,EAAL,CAAxC,CADsC,CAEtC,CAACe,IAAI,CAAC,gBAAN,CAAwBC,KAAK,CAAEhB,YAAY,CAAC,EAAD,CAAK,EAAL,CAA3C,CAFsC,CAGtC,CAACe,IAAI,CAAC,cAAN,CAAsBC,KAAK,CAAEhB,YAAY,CAAC,EAAD,CAAK,EAAL,CAAzC,CAHsC,CAItC,CAACe,IAAI,CAAC,eAAN,CAAuBC,KAAK,CAAEhB,YAAY,CAAC,EAAD,CAAK,EAAL,CAA1C,CAJsC,CAKtC,CAACe,IAAI,CAAC,eAAN,CAAuBC,KAAK,CAAEhB,YAAY,CAAC,EAAD,CAAK,EAAL,CAA1C,CALsC,CAMtC,CAACe,IAAI,CAAC,cAAN,CAAsBC,KAAK,CAAEhB,YAAY,CAAC,EAAD,CAAK,EAAL,CAAzC,CANsC,CAA1C,CADgB,CAShB,CAACY,IAAI,CAAC,KAAN,CAAaC,SAAS,CAAC,UAAvB,CAAmCC,MAAM,CAAC,CACtC,CAACC,IAAI,CAAC,aAAN,CAAqBC,KAAK,CAAEhB,YAAY,CAAC,CAAD,CAAI,EAAJ,CAAxC,CADsC,CAEtC,CAACe,IAAI,CAAC,gBAAN,CAAwBC,KAAK,CAAEhB,YAAY,CAAC,CAAD,CAAI,EAAJ,CAA3C,CAFsC,CAGtC,CAACe,IAAI,CAAC,cAAN,CAAsBC,KAAK,CAAEhB,YAAY,CAAC,CAAD,CAAI,EAAJ,CAAzC,CAHsC,CAItC,CAACe,IAAI,CAAC,eAAN,CAAuBC,KAAK,CAAEhB,YAAY,CAAC,CAAD,CAAI,EAAJ,CAA1C,CAJsC,CAKtC,CAACe,IAAI,CAAC,eAAN,CAAuBC,KAAK,CAAEhB,YAAY,CAAC,CAAD,CAAI,EAAJ,CAA1C,CALsC,CAMtC,CAACe,IAAI,CAAC,cAAN,CAAsBC,KAAK,CAAEhB,YAAY,CAAC,CAAD,CAAI,EAAJ,CAAzC,CANsC,CAA1C,CATgB,CAiBhB,CAACY,IAAI,CAAC,KAAN,CAAaC,SAAS,CAAC,SAAvB,CAAkCC,MAAM,CAAC,CACrC,CAACC,IAAI,CAAC,aAAN,CAAqBC,KAAK,CAAE,IAA5B,CADqC,CAErC,CAACD,IAAI,CAAC,gBAAN,CAAwBC,KAAK,CAAE,IAA/B,CAFqC,CAGrC,CAACD,IAAI,CAAC,cAAN,CAAsBC,KAAK,CAAE,IAA7B,CAHqC,CAIrC,CAACD,IAAI,CAAC,eAAN,CAAuBC,KAAK,CAAE,IAA9B,CAJqC,CAKrC,CAACD,IAAI,CAAC,eAAN,CAAuBC,KAAK,CAAE,IAA9B,CALqC,CAMrC,CAACD,IAAI,CAAC,cAAN,CAAsBC,KAAK,CAAE,IAA7B,CANqC,CAAzC,CAjBgB,CAAlB,CA2BA,GAAMC,CAAAA,QAAQ,CAAG,CACf,CAACL,IAAI,CAAC,KAAN,CAAaM,QAAQ,CAAC,UAAtB,CAAkCJ,MAAM,CAAC,CACrC,CAACC,IAAI,CAAC,aAAN,CAAqBC,KAAK,CAAEhB,YAAY,CAAC,CAAD,CAAG,GAAH,CAAZ,CAAoB,GAAhD,CADqC,CAErC,CAACe,IAAI,CAAC,gBAAN,CAAwBC,KAAK,CAAEhB,YAAY,CAAC,CAAD,CAAG,GAAH,CAAZ,CAAoB,GAAnD,CAFqC,CAGrC,CAACe,IAAI,CAAC,cAAN,CAAsBC,KAAK,CAAEhB,YAAY,CAAC,CAAD,CAAG,GAAH,CAAZ,CAAoB,GAAjD,CAHqC,CAIrC,CAACe,IAAI,CAAC,eAAN,CAAuBC,KAAK,CAAEhB,YAAY,CAAC,CAAD,CAAG,GAAH,CAAZ,CAAoB,GAAlD,CAJqC,CAKrC,CAACe,IAAI,CAAC,eAAN,CAAuBC,KAAK,CAAEhB,YAAY,CAAC,CAAD,CAAG,GAAH,CAAZ,CAAoB,GAAlD,CALqC,CAMrC,CAACe,IAAI,CAAC,cAAN,CAAsBC,KAAK,CAAEhB,YAAY,CAAC,CAAD,CAAG,GAAH,CAAZ,CAAoB,GAAjD,CANqC,CAAzC,CADe,CASf,CAACY,IAAI,CAAC,KAAN,CAAaM,QAAQ,CAAC,OAAtB,CAA+BJ,MAAM,CAAC,CAClC,CAACC,IAAI,CAAC,aAAN,CAAqBC,KAAK,CAAEhB,YAAY,CAAC,CAAD,CAAG,GAAH,CAAZ,CAAoB,GAAhD,CADkC,CAElC,CAACe,IAAI,CAAC,gBAAN,CAAwBC,KAAK,CAAEhB,YAAY,CAAC,CAAD,CAAG,GAAH,CAAZ,CAAoB,GAAnD,CAFkC,CAGlC,CAACe,IAAI,CAAC,cAAN,CAAsBC,KAAK,CAAEhB,YAAY,CAAC,CAAD,CAAG,GAAH,CAAZ,CAAoB,GAAjD,CAHkC,CAIlC,CAACe,IAAI,CAAC,eAAN,CAAuBC,KAAK,CAAEhB,YAAY,CAAC,CAAD,CAAG,GAAH,CAAZ,CAAoB,GAAlD,CAJkC,CAKlC,CAACe,IAAI,CAAC,eAAN,CAAuBC,KAAK,CAAEhB,YAAY,CAAC,CAAD,CAAG,GAAH,CAAZ,CAAoB,GAAlD,CALkC,CAMlC,CAACe,IAAI,CAAC,cAAN,CAAsBC,KAAK,CAAEhB,YAAY,CAAC,CAAD,CAAG,GAAH,CAAZ,CAAoB,GAAjD,CANkC,CAAtC,CATe,CAiBf,CAACY,IAAI,CAAC,KAAN,CAAaM,QAAQ,CAAC,QAAtB,CAAgCJ,MAAM,CAAC,CACnC,CAACC,IAAI,CAAC,aAAN,CAAqBC,KAAK,CAAEhB,YAAY,CAAC,CAAD,CAAG,EAAH,CAAZ,CAAmB,GAA/C,CADmC,CAEnC,CAACe,IAAI,CAAC,gBAAN,CAAwBC,KAAK,CAAEhB,YAAY,CAAC,CAAD,CAAG,EAAH,CAAZ,CAAmB,GAAlD,CAFmC,CAGnC,CAACe,IAAI,CAAC,cAAN,CAAsBC,KAAK,CAAEhB,YAAY,CAAC,CAAD,CAAG,EAAH,CAAZ,CAAmB,GAAhD,CAHmC,CAInC,CAACe,IAAI,CAAC,eAAN,CAAuBC,KAAK,CAAEhB,YAAY,CAAC,CAAD,CAAG,EAAH,CAAZ,CAAmB,GAAjD,CAJmC,CAKnC,CAACe,IAAI,CAAC,eAAN,CAAuBC,KAAK,CAAEhB,YAAY,CAAC,CAAD,CAAG,EAAH,CAAZ,CAAmB,GAAjD,CALmC,CAMnC,CAACe,IAAI,CAAC,cAAN,CAAsBC,KAAK,CAAEhB,YAAY,CAAC,CAAD,CAAG,EAAH,CAAZ,CAAmB,GAAhD,CANmC,CAAvC,CAjBe,CAAjB,CA8BA;AAEAf,SAAS,CAAC,UAAI,CAGd,GAAMkC,CAAAA,IAAI,CAAGrB,aAAa,CAACa,SAAD,CAAWM,QAArC,CAEA3B,EAAE,CAAC8B,MAAH,CAAU,iBAAV,EAA6BC,SAA7B,CAAuC,GAAvC,EAA4CC,MAA5C,GAEA,GAAIC,CAAAA,KAAK,CAAG,GAAZ,CACA,GAAIC,CAAAA,MAAM,CAAG,GAAb,CACA;AACA,GAAIC,CAAAA,MAAM,CAAG,CAACC,GAAG,CAAE,CAAN,CAASC,KAAK,CAAE,EAAhB,CAAoBC,MAAM,CAAE,EAA5B,CAAgCC,IAAI,CAAE,EAAtC,CAAb,CAEA,GAAIC,CAAAA,QAAQ,CAAG,GAAf,CAEA,GAAIC,CAAAA,WAAW,CAAG,MAAlB,CACA,GAAIC,CAAAA,gBAAgB,CAAG,MAAvB,CACA,GAAIC,CAAAA,sBAAsB,CAAG,KAA7B,CACA,GAAIC,CAAAA,UAAU,CAAG,OAAjB,CACA,GAAIC,CAAAA,eAAe,CAAG,OAAtB,CAEA,GAAIC,CAAAA,aAAa,CAAG,MAApB,CACA,GAAIC,CAAAA,wBAAwB,CAAG,MAA/B,CACA,GAAIC,CAAAA,YAAY,CAAG,CAAnB,CACA,GAAIC,CAAAA,iBAAiB,CAAG,CAAxB,CAEJ,GAAIC,CAAAA,MAAM,CAAIrB,IAAI,CAAC,CAAD,CAAJ,CAAQL,MAAR,CAAe2B,GAAf,CAAmB,SAAA/B,KAAK,CAAG,CAAC,MAAOA,CAAAA,KAAK,CAACK,IAAb,CAAkB,CAA9C,CAAd,CAGA,WACA,GAAI2B,CAAAA,MAAM,CAAGpD,EAAE,CAACqD,UAAH,GACVC,MADU,CACHJ,MADG,EAEVK,UAFU,CAEC,CAAC,CAAD,CAAItB,KAAK,CAAGE,MAAM,CAACI,IAAnB,CAFD,CAAb,CAKA,GAAIiB,CAAAA,MAAM,CAAGxD,EAAE,CAACyD,WAAH,GACVH,MADU,CACH,CAAC,CAAD,CAAI9C,aAAa,CAAE,GAAF,CAAO,GAAxB,CADG,EAEVkD,KAFU,CAEJ,CAACxB,MAAM,CAACC,MAAM,CAACG,MAAf,CAAuB,CAAvB,CAFI,CAAb,CAIA,GAAIqB,CAAAA,KAAK,CAAG3D,EAAE,CAAC4D,YAAH,CAAgB,CAAC,SAAD,CAAW,SAAX,CAAsB,SAAtB,CAAhB,CAAZ,CAEA,GAAIC,CAAAA,SAAS,CAAG7D,EAAE,CAAC4D,YAAH,CAAgB,CAAC,SAAD,CAAY,SAAZ,CAAuB,SAAvB,CAAhB,CAAhB,CAEA,aACA,GAAIE,CAAAA,GAAG,CAAG9D,EAAE,CAAC8B,MAAH,CAAUvB,WAAW,CAACwD,OAAtB,EACTC,IADS,CACJ,OADI,CACK,gBADL,EAETC,MAFS,CAEF,KAFE,EAGTD,IAHS,CAGJ,OAHI,CAGK/B,KAAK,CAAGE,MAAM,CAACI,IAAf,CAAsBJ,MAAM,CAACE,KAHlC,EAIT2B,IAJS,CAIJ,QAJI,CAIM9B,MAAM,CAAGC,MAAM,CAACC,GAAhB,CAAsBD,MAAM,CAACG,MAJnC,EAKP2B,MALO,CAKA,GALA,EAMPD,IANO,CAMF,WANE,CAMW,aAAe7B,MAAM,CAACI,IAAtB,CAA6B,GAA7B,CAAmCJ,MAAM,CAACC,GAA1C,CAAgD,GAN3D,CAAV,CAQE,GAAI8B,CAAAA,OAAO,CAAGlE,EAAE,CAAC8B,MAAH,CAAU,UAAV,CAAd,CACA,GAAIqC,CAAAA,WAAW,CAAGL,GAAG,CAACG,MAAJ,CAAW,MAAX,CAAlB,CAEA,GAAIG,CAAAA,UAAU,CAAGpE,EAAE,CACZ8B,MADU,CACH,MADG,EAEVmC,MAFU,CAEH,KAFG,EAGVD,IAHU,CAGL,OAHK,CAGI,SAHJ,EAIVA,IAJU,CAIL,WAJK,CAIQ,OAJR,CAAjB,CAOF,uBACA,GAAIK,CAAAA,IAAI,CAAGrE,EAAE,CAACqE,IAAH,GACRC,CADQ,CACN,SAAAC,CAAC,QAAInB,CAAAA,MAAM,CAACmB,CAAC,CAAC9C,IAAH,CAAV,EADK,EAER+C,CAFQ,CAEN,SAAAD,CAAC,QAAIf,CAAAA,MAAM,CAACe,CAAC,CAAC7C,KAAH,CAAV,EAFK,CAAX,CAIA,GAAI+C,CAAAA,KAAK,CAAGX,GAAG,CAACG,MAAJ,CAAW,GAAX,EACTD,IADS,CACJ,OADI,CACK,OADL,CAAZ,CAGAS,KAAK,CAAC1C,SAAN,CAAgB,aAAhB,EACGF,IADH,CACQA,IADR,EACc6C,KADd,GAEGT,MAFH,CAEU,GAFV,EAGGD,IAHH,CAGQ,OAHR,CAGiB,YAHjB,EAIGW,EAJH,CAIM,WAJN,CAImB,SAASJ,CAAT,CAAYK,CAAZ,CAAe,CAC5Bd,GAAG,CAACG,MAAJ,CAAW,MAAX,EACGD,IADH,CACQ,OADR,CACiB,YADjB,EAEGa,KAFH,CAES,MAFT,CAEiBrE,aAAa,CAACmD,KAAK,CAACiB,CAAD,CAAN,CAAUf,SAAS,CAACe,CAAD,CAFjD,EAGGE,IAHH,CAGQtE,aAAa,CAAC+D,CAAC,CAAChD,SAAH,CAAagD,CAAC,CAAC3C,QAHpC,EAIGoC,IAJH,CAIQ,aAJR,CAIuB,QAJvB,EAKGA,IALH,CAKQ,GALR,CAKa,CAAC/B,KAAK,CAACE,MAAM,CAACI,IAAd,EAAoB,CALjC,EAMGyB,IANH,CAMQ,GANR,CAMa,CANb,EAOD,CAZL,EAaGW,EAbH,CAaM,UAbN,CAakB,SAASJ,CAAT,CAAY,CACxBT,GAAG,CAAChC,MAAJ,CAAW,aAAX,EAA0BE,MAA1B,GACD,CAfL,EAgBGiC,MAhBH,CAgBU,MAhBV,EAiBGD,IAjBH,CAiBQ,OAjBR,CAiBiB,MAjBjB,EAkBGA,IAlBH,CAkBQ,GAlBR,CAkBa,SAAAO,CAAC,QAAIF,CAAAA,IAAI,CAACE,CAAC,CAAC/C,MAAH,CAAR,EAlBd,EAmBGqD,KAnBH,CAmBS,QAnBT,CAmBmB,SAACN,CAAD,CAAIK,CAAJ,QAAUpE,CAAAA,aAAa,CAACmD,KAAK,CAACiB,CAAD,CAAN,CAAUf,SAAS,CAACe,CAAD,CAA1C,EAnBnB,EAoBGC,KApBH,CAoBS,SApBT,CAoBoBpC,WApBpB,EAqBGkC,EArBH,CAqBM,WArBN,CAqBmB,SAASJ,CAAT,CAAY,CACzBvE,EAAE,CAAC+B,SAAH,CAAa,OAAb,EACA8C,KADA,CACM,SADN,CACiBlC,sBADjB,EAEA3C,EAAE,CAAC+B,SAAH,CAAa,SAAb,EACA8C,KADA,CACM,SADN,CACiB9B,wBADjB,EAEA/C,EAAE,CAAC8B,MAAH,CAAU,IAAV,EACG+C,KADH,CACS,SADT,CACoBnC,gBADpB,EAEGmC,KAFH,CAES,cAFT,CAEyBhC,eAFzB,EAGGgC,KAHH,CAGS,QAHT,CAGmB,SAHnB,EAID,CA9BL,EA+BGF,EA/BH,CA+BM,UA/BN,CA+BkB,SAASJ,CAAT,CAAY,CACxBvE,EAAE,CAAC+B,SAAH,CAAa,OAAb,EACA8C,KADA,CACM,SADN,CACiBpC,WADjB,EAEAzC,EAAE,CAAC+B,SAAH,CAAa,SAAb,EACA8C,KADA,CACM,SADN,CACiB/B,aADjB,EAEA9C,EAAE,CAAC8B,MAAH,CAAU,IAAV,EACG+C,KADH,CACS,cADT,CACyBjC,UADzB,EAEGiC,KAFH,CAES,QAFT,CAEmB,MAFnB,EAGD,CAvCL,EA0CA,6BACAJ,KAAK,CAAC1C,SAAN,CAAgB,cAAhB,EACGF,IADH,CACQA,IADR,EACc6C,KADd,GAEGT,MAFH,CAEU,GAFV,EAGGY,KAHH,CAGS,MAHT,CAGiB,SAACN,CAAD,CAAIK,CAAJ,QAAUpE,CAAAA,aAAa,CAACmD,KAAK,CAACiB,CAAD,CAAN,CAAUf,SAAS,CAACe,CAAD,CAA1C,EAHjB,EAIG7C,SAJH,CAIa,QAJb,EAKGF,IALH,CAKQ,SAAA0C,CAAC,QAAIA,CAAAA,CAAC,CAAC/C,MAAN,EALT,EAKuBkD,KALvB,GAMGT,MANH,CAMU,GANV,EAOGD,IAPH,CAOQ,OAPR,CAOiB,QAPjB,EAQGW,EARH,CAQM,WARN,CASE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MACE,SAASJ,CAAT,CAAW,CAACQ,WAAW,CAACR,CAAC,CAAC9C,IAAH,CAAX,CACV;AACJ;AACA;AACA;AACA;AACA;AACA,MACK,CA5BL,EA6BGkD,EA7BH,CA6BM,UA7BN,CA8BE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,OACI,SAASJ,CAAT,CAAW,CACXS,aAAa,GACbZ,UAAU,CAACS,KAAX,CAAiB,SAAjB,CAA4B,MAA5B,EACC,CAzCL,EA4CGZ,MA5CH,CA4CU,QA5CV,EA6CGD,IA7CH,CA6CQ,IA7CR,CA6Cc,SAAAO,CAAC,QAAInB,CAAAA,MAAM,CAACmB,CAAC,CAAC9C,IAAH,CAAV,EA7Cf,EA8CGuC,IA9CH,CA8CQ,IA9CR,CA8Cc,SAAAO,CAAC,QAAIf,CAAAA,MAAM,CAACe,CAAC,CAAC7C,KAAH,CAAV,EA9Cf,EA+CGsC,IA/CH,CA+CQ,GA/CR,CA+CahB,YA/Cb,EAgDG6B,KAhDH,CAgDS,SAhDT,CAgDoB/B,aAhDpB,EAiDG6B,EAjDH,CAiDM,WAjDN,CAiDmB,SAASJ,CAAT,CAAY,CACvBvE,EAAE,CAAC8B,MAAH,CAAU,IAAV,EACGmD,UADH,GAEGzC,QAFH,CAEYA,QAFZ,EAGGwB,IAHH,CAGQ,GAHR,CAGaf,iBAHb,EAID,CAtDP,EAuDK0B,EAvDL,CAuDQ,UAvDR,CAuDoB,SAASJ,CAAT,CAAY,CACxBvE,EAAE,CAAC8B,MAAH,CAAU,IAAV,EACGmD,UADH,GAEGzC,QAFH,CAEYA,QAFZ,EAGGwB,IAHH,CAGQ,GAHR,CAGahB,YAHb,EAID,CA5DP,EAgEA,uBACA,GAAIkC,CAAAA,KAAK,CAAGlF,EAAE,CAACmF,UAAH,CAAc/B,MAAd,EACCgC,KADD,CACO,CADP,CAAZ,CAGA,GAAIC,CAAAA,KAAK,CAAGrF,EAAE,CAACsF,QAAH,CAAY9B,MAAZ,EACC4B,KADD,CACO,CADP,EAECG,UAFD,CAEY,SAAShB,CAAT,CAAY,CAAC,MAAOA,CAAAA,CAAC,CAAE,GAAV,CAAc,CAFvC,CAAZ,CAIAT,GAAG,CAACG,MAAJ,CAAW,GAAX,EACGD,IADH,CACQ,OADR,CACiB,QADjB,EAEGA,IAFH,CAEQ,WAFR,wBAEqC9B,MAAM,CAACC,MAAM,CAACG,MAFnD,OAGGkD,IAHH,CAGQN,KAHR,EAIGnD,SAJH,CAIa,YAJb,EAKGyD,IALH,CAKQC,IALR,CAKc,EALd,EAOA3B,GAAG,CAACG,MAAJ,CAAW,GAAX,EACGD,IADH,CACQ,OADR,CACiB,QADjB,EAEGwB,IAFH,CAEQH,KAFR,EAGGpB,MAHH,CAGU,MAHV,EAIGD,IAJH,CAIQ,GAJR,CAIa,EAJb,EAKGA,IALH,CAKQ,GALR,CAKa,CALb,EAMGA,IANH,CAMQ,aANR,CAMuB,OANvB,EAOGA,IAPH,CAOQ,WAPR,CAOqB,YAPrB,EAQGA,IARH,CAQQ,MARR,CAQgB,MARhB,EASGc,IATH,CASQtE,aAAa,CAAC,eAAD,CAAiB,qBATtC,EAWA,QAASwE,CAAAA,aAAT,EAAyB,CACrB,GAAId,OAAJ,CAAaA,OAAO,CAACW,KAAR,CAAc,SAAd,CAAyB,MAAzB,EACb,GAAIV,WAAJ,CAAiBA,WAAW,CAACH,IAAZ,CAAiB,QAAjB,CAA2B,MAA3B,EAClB,CAED,QAASe,CAAAA,WAAT,CAAqBtD,IAArB,CAA2B,CAEzB,GAAIiE,CAAAA,GAAG,CAAG,CAAV,CACA,GAAIC,CAAAA,GAAG,CAAG,CAAV,CACA,GAAIC,CAAAA,GAAG,CAAG,CAAV,CAEA,GAAIpE,CAAAA,MAAM,CAAG,EAAb,CACAK,IAAI,CAACgE,OAAL,CAAa,SAAAC,OAAO,CAAI,CACpB,GAAGA,OAAO,CAACxE,IAAR,GAAiB,KAApB,CAA0B,CACtBwE,OAAO,CAACtE,MAAR,CAAeqE,OAAf,CAAuB,SAAAE,KAAK,CAAE,CAC1B,GAAIA,KAAK,CAACtE,IAAN,GAAeA,IAAnB,CAAwB,CACpBiE,GAAG,CAAGK,KAAK,CAACrE,KAAZ,CACAF,MAAM,CAACwE,IAAP,CAAY,CAAC1E,IAAI,CAAC,KAAN,CAAaM,QAAQ,CAAC,UAAtB,CAAkCR,KAAK,CAAC2E,KAAK,CAACrE,KAA9C,CAAZ,EACH,CACJ,CALD,EAMH,CACD,GAAGoE,OAAO,CAACxE,IAAR,GAAiB,KAApB,CAA0B,CACtBwE,OAAO,CAACtE,MAAR,CAAeqE,OAAf,CAAuB,SAAAE,KAAK,CAAE,CAC1B,GAAIA,KAAK,CAACtE,IAAN,GAAeA,IAAnB,CAAwB,CACpBkE,GAAG,CAAGI,KAAK,CAACrE,KAAZ,CACAF,MAAM,CAACwE,IAAP,CAAY,CAAC1E,IAAI,CAAC,KAAN,CAAYM,QAAQ,CAAC,OAArB,CAA8BR,KAAK,CAAC2E,KAAK,CAACrE,KAA1C,CAAZ,EAEH,CACJ,CAND,EAOH,CACD,GAAGoE,OAAO,CAACxE,IAAR,GAAiB,KAApB,CAA0B,CACtBwE,OAAO,CAACtE,MAAR,CAAeqE,OAAf,CAAuB,SAAAE,KAAK,CAAE,CAC1B,GAAIA,KAAK,CAACtE,IAAN,GAAeA,IAAnB,CAAwB,CACpBmE,GAAG,CAAGG,KAAK,CAACrE,KAAZ,CACAF,MAAM,CAACwE,IAAP,CAAY,CAAC1E,IAAI,CAAC,KAAN,CAAaM,QAAQ,CAAC,QAAtB,CAAgCR,KAAK,CAAC2E,KAAK,CAACrE,KAA5C,CAAZ,EAEH,CACJ,CAND,EAOH,CACJ,CA3BD,EA6BAF,MAAM,CAACyE,IAAP,CAAY,SAACC,CAAD,CAAIC,CAAJ,QAAUA,CAAAA,CAAC,CAAC/E,KAAF,CAAU8E,CAAC,CAAC9E,KAAtB,EAAZ,EAGA+C,WAAW,CAACH,IAAZ,CAAiB,QAAjB,CAA2B,MAA3B,EACGA,IADH,CACQ,IADR,CACcZ,MAAM,CAAC3B,IAAD,CADpB,EAEGuC,IAFH,CAEQ,IAFR,CAEcZ,MAAM,CAAC3B,IAAD,CAFpB,EAGGuC,IAHH,CAGQ,IAHR,CAGc,CAHd,EAIGA,IAJH,CAIQ,IAJR,CAIc9B,MAAM,CAACC,MAAM,CAACG,MAJ5B,EAME8B,UAAU,CACTS,KADD,CACO,MADP,CACe7E,EAAE,CAACkB,KAAH,CAASkF,KAAT,CAAe,EAAf,CAAkB,IADjC,EAECvB,KAFD,CAEO,KAFP,CAEc7E,EAAE,CAACkB,KAAH,CAASmF,KAAT,CAAe,EAAf,CAAkB,IAFhC,EAGCxB,KAHD,CAGO,SAHP,CAGkB,cAHlB,EAICyB,IAJD,CAIM9F,aAAa,CACjBgB,MAAM,CAAC2B,GAAP,CAAW,SAAAoD,IAAI,CAAE,CAChB,MAAQ,mBAAoBA,IAAI,CAACjF,IAAzB,CAA+B,WAA/B,CAA4CiF,IAAI,CAACnF,KAAjD,CAAyD,SAAjE,CACA,CAFD,CADiB,CAKjBI,MAAM,CAAC2B,GAAP,CAAW,SAAAoD,IAAI,CAAE,CACf,MAAQ,mBAAoBA,IAAI,CAAC3E,QAAzB,CAAmC,WAAnC,CAAgD2E,IAAI,CAAC3E,QAArD,CAA+D,IAA/D,CAAqE2E,IAAI,CAACnF,KAA1E,CAAkF,SAA1F,CACA,CAFF,CATF,EAeH,CAED,QAASqE,CAAAA,IAAT,CAAcX,IAAd,CAAoB7C,KAApB,CAA2B,CACzB6C,IAAI,CAAC0B,IAAL,CAAU,UAAY,CAClB,GAAI1B,CAAAA,IAAI,CAAG9E,EAAE,CAAC8B,MAAH,CAAU,IAAV,CAAX,CACI2E,KAAK,CAAG3B,IAAI,CAACA,IAAL,GAAY4B,KAAZ,CAAkB,KAAlB,EAAyBC,OAAzB,EADZ,CAEIC,IAFJ,CAGIvC,IAAI,CAAG,EAHX,CAIIwC,UAAU,CAAG,CAJjB,CAKIC,UAAU,CAAG,CALjB,CAKoB;AAChBtC,CAAC,CAAGM,IAAI,CAACd,IAAL,CAAU,GAAV,EAAgB,CAACyC,KAAK,CAACM,MAAN,CAAa,CAAd,EAAiB,CANzC,CAOIC,EAAE,CAAGC,UAAU,CAACnC,IAAI,CAACd,IAAL,CAAU,IAAV,CAAD,CAPnB,CAQIkD,KAAK,CAAGpC,IAAI,CAACA,IAAL,CAAU,IAAV,EAAgBb,MAAhB,CAAuB,OAAvB,EAAgCD,IAAhC,CAAqC,GAArC,CAA0C,CAA1C,EAA6CA,IAA7C,CAAkD,GAAlD,CAAuDQ,CAAvD,EAA0DR,IAA1D,CAA+D,IAA/D,CAAqEgD,EAAE,CAAG,IAA1E,CARZ,CASA,MAAOJ,IAAI,CAAGH,KAAK,CAACU,GAAN,EAAd,CAA2B,CACvB9C,IAAI,CAAC2B,IAAL,CAAUY,IAAV,EACAM,KAAK,CAACpC,IAAN,CAAWT,IAAI,CAAC+C,IAAL,CAAU,GAAV,CAAX,EACA,GAAIF,KAAK,CAACG,IAAN,GAAaC,qBAAb,GAAuCrF,KAA3C,CAAkD,CAC9CoC,IAAI,CAAC8C,GAAL,GACAD,KAAK,CAACpC,IAAN,CAAWT,IAAI,CAAC+C,IAAL,CAAU,GAAV,CAAX,EACA/C,IAAI,CAAG,CAACuC,IAAD,CAAP,CACAM,KAAK,CAAGpC,IAAI,CAACb,MAAL,CAAY,OAAZ,EAAqBD,IAArB,CAA0B,GAA1B,CAA+B,CAA/B,EAAkCA,IAAlC,CAAuC,GAAvC,CAA4CQ,CAA5C,EAA+CR,IAA/C,CAAoD,IAApD,CAA0D,EAAE6C,UAAF,CAAeC,UAAf,CAA4BE,EAA5B,CAAiC,IAA3F,EAAiGlC,IAAjG,CAAsG8B,IAAtG,CAAR,CACH,CACJ,CACJ,CApBD,EAqBD,CAEE,CArSQ,CAqSN,CAACvG,gBAAD,CAAmBG,aAAnB,CArSM,CAAT,CAuSA,mBACI,sCAEF,aAAK,SAAS,CAAC,eAAf,wBACE,aAAK,SAAS,CAAC,oBAAf,wBACI,UAAG,SAAS,CAAC,6BAAb,CAA2C,eAA3C,CAAoD,WAAS,eAA7D,EADJ,cAEI,KAAC,YAAD,EAAc,EAAE,CAAC,eAAjB,CAAiC,SAAS,CAAC,iBAA3C,CAA6D,KAAK,CAAC,KAAnE,CAAyE,SAAS,CAAC,SAAnF,CAA6F,eAAe,CAAC,SAA7G,uBAEE,yFAAuD,qCAAvD,kDAFF,EAFJ,GADF,cAWA,aAAK,SAAS,CAAC,oBAAf,wBACM,YAAK,SAAS,CAAC,uBAAf,uBACE,gBAAQ,SAAS,CAAC,cAAlB,CAAiC,QAAQ,CAAE,kBAAA+G,CAAC,QAAItG,CAAAA,YAAY,CAACsG,CAAD,CAAhB,EAA5C,wBACE,eAAQ,KAAK,CAAC,MAAd,uBADF,cAEE,eAAQ,KAAK,CAAC,KAAd,wBAFF,GADF,EADN,cAWI,YAAK,EAAE,CAAC,WAAR,CAAoB,KAAK,CAAC,KAA1B,CAAgC,MAAM,CAAC,KAAvC,CAA6C,GAAG,CAAEhH,WAAlD,EAXJ,GAXA,GAFE,EADJ,CA8BH,CA3ZD,CA6ZA,cAAeJ,CAAAA,SAAf","sourcesContent":["import React, { useContext, useEffect, useRef, useReducer, useState, createContext } from \"react\";\nimport * as d3 from 'd3'\nimport ReactTooltip from 'react-tooltip';\nimport '../style/linechart.css'\nimport {SentimentContext} from '../App'\n\n\nconst LineChart = () =>{\n\n  const SentSentimentContext = useContext(SentimentContext);\n  const {choosenSentiment, setChoosenSentiment} = SentSentimentContext\n\n    const d3Container = useRef(null)\n\n    const [showSentiment, setShowSentiment] = useState(true)\n\n    //const [data, setGraphData] = useState([])\n\n    function getRandomInt(min, max) {\n      min = Math.ceil(min);\n      max = Math.floor(max);\n      return Math.floor(Math.random() * (max - min) + min); //The maximum is exclusive and the minimum is inclusive\n    }\n\n    const handleOption = (event) =>{\n      if(event.target.value ==='sent'){\n        setShowSentiment(true)\n      }\n      else{\n\n        setShowSentiment(false)\n      }\n    }\n\n    const sent_data = [\n      {name:'pos', sent_name:'Positive', values:[\n          {date:'August 2020', price: getRandomInt(15, 40)},\n          {date:'September 2020', price: getRandomInt(15, 40)},\n          {date:'October 2020', price: getRandomInt(15, 40)},\n          {date:'November 2020', price: getRandomInt(15, 40)},\n          {date:'December 2020', price: getRandomInt(15, 40)},\n          {date:'January 2021', price: getRandomInt(15, 40)},\n      ]},\n      {name:'neg', sent_name:'Negative', values:[\n          {date:'August 2020', price: getRandomInt(2, 18)},\n          {date:'September 2020', price: getRandomInt(2, 18)},\n          {date:'October 2020', price: getRandomInt(2, 18)},\n          {date:'November 2020', price: getRandomInt(2, 18)},\n          {date:'December 2020', price: getRandomInt(2, 18)},\n          {date:'January 2021', price: getRandomInt(2, 18)},\n      ]},\n      {name:'neu', sent_name:'Neutral', values:[\n          {date:'August 2020', price: '54'},\n          {date:'September 2020', price: '55'},\n          {date:'October 2020', price: '57'},\n          {date:'November 2020', price: '53'},\n          {date:'December 2020', price: '52'},\n          {date:'January 2021', price: '59'},\n      ]},\n    ]\n\n    const eng_data = [\n      {name:'pos', eng_name:'Comments', values:[\n          {date:'August 2020', price: getRandomInt(1,120)/100},\n          {date:'September 2020', price: getRandomInt(1,120)/100},\n          {date:'October 2020', price: getRandomInt(1,120)/100},\n          {date:'November 2020', price: getRandomInt(1,120)/100},\n          {date:'December 2020', price: getRandomInt(1,120)/100},\n          {date:'January 2021', price: getRandomInt(1,120)/100},\n      ]},\n      {name:'neg', eng_name:'Likes', values:[\n          {date:'August 2020', price: getRandomInt(1,230)/100},\n          {date:'September 2020', price: getRandomInt(1,230)/100},\n          {date:'October 2020', price: getRandomInt(1,230)/100},\n          {date:'November 2020', price: getRandomInt(1,230)/100},\n          {date:'December 2020', price: getRandomInt(1,230)/100},\n          {date:'January 2021', price: getRandomInt(1,230)/100},\n      ]},\n      {name:'neu', eng_name:'Shares', values:[\n          {date:'August 2020', price: getRandomInt(1,90)/100},\n          {date:'September 2020', price: getRandomInt(1,90)/100},\n          {date:'October 2020', price: getRandomInt(1,90)/100},\n          {date:'November 2020', price: getRandomInt(1,90)/100},\n          {date:'December 2020', price: getRandomInt(1,90)/100},\n          {date:'January 2021', price: getRandomInt(1,90)/100},\n      ]},\n    ]\n\n    \n\n\n    //const months = ['jan', 'feb', 'mars', 'april', 'may', 'june']\n\n    useEffect(()=>{\n\n    \n    const data = showSentiment?sent_data:eng_data\n\n    d3.select(\".root_linechart\").selectAll('*').remove()\n\n    var width = 400;\n    var height = 200;\n    //var margin = 35;\n    var margin = {top: 5, right: 10, bottom: 15, left: 35}\n\n    var duration = 250;\n\n    var lineOpacity = \"0.25\";\n    var lineOpacityHover = \"0.85\";\n    var otherLinesOpacityHover = \"0.1\";\n    var lineStroke = \"1.5px\";\n    var lineStrokeHover = \"2.5px\";\n\n    var circleOpacity = '0.85';\n    var circleOpacityOnLineHover = \"0.25\"\n    var circleRadius = 3;\n    var circleRadiusHover = 6;\n\nvar months = (data[0].values.map(value =>{return value.date}))\n\n\n/* Scale */\nvar xScale = d3.scalePoint()\n  .domain(months)\n  .rangeRound([0, width - margin.left])\n\n\nvar yScale = d3.scaleLinear()\n  .domain([0, showSentiment? 100: 2.3 ])\n  .range([height-margin.bottom, 0]);\n\nvar color = d3.scaleOrdinal(['#63A37B','#F15645', '#7D7D7D']);\n\nvar color_eng = d3.scaleOrdinal(['#005282', '#336D90', '#6692AC']);\n\n/* Add SVG */\nvar svg = d3.select(d3Container.current)\n.attr('class', 'root_linechart')\n.append(\"svg\")\n.attr(\"width\", width + margin.left + margin.right)\n.attr(\"height\", height + margin.top + margin.bottom)\n  .append('g')\n  .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n  var tooltip = d3.select('#tooltip');\n  var tooltipLine = svg.append('line');\n\n  var divTooltip = d3\n        .select('body')\n        .append('div')\n        .attr('class', 'toolTip')\n        .attr('font-size', '100px')\n\n\n/* Add line into SVG */\nvar line = d3.line()\n  .x(d => xScale(d.date))\n  .y(d => yScale(d.price));\n\nlet lines = svg.append('g')\n  .attr('class', 'lines');\n\nlines.selectAll('.line-group')\n  .data(data).enter()\n  .append('g')\n  .attr('class', 'line-group')  \n  .on(\"mouseover\", function(d, i) {\n      svg.append(\"text\")\n        .attr(\"class\", \"title-text\")\n        .style(\"fill\", showSentiment?color(i):color_eng(i))        \n        .text(showSentiment?d.sent_name:d.eng_name)\n        .attr(\"text-anchor\", \"middle\")\n        .attr(\"x\", (width-margin.left)/2)\n        .attr(\"y\", 5);\n    })\n  .on(\"mouseout\", function(d) {\n      svg.select(\".title-text\").remove();\n    })\n  .append('path')\n  .attr('class', 'line')  \n  .attr('d', d => line(d.values))\n  .style('stroke', (d, i) => showSentiment?color(i):color_eng(i))\n  .style('opacity', lineOpacity)\n  .on(\"mouseover\", function(d) {\n      d3.selectAll('.line')\n\t\t\t\t\t.style('opacity', otherLinesOpacityHover);\n      d3.selectAll('.circle')\n\t\t\t\t\t.style('opacity', circleOpacityOnLineHover);\n      d3.select(this)\n        .style('opacity', lineOpacityHover)\n        .style(\"stroke-width\", lineStrokeHover)\n        .style(\"cursor\", \"pointer\");\n    })\n  .on(\"mouseout\", function(d) {\n      d3.selectAll(\".line\")\n\t\t\t\t\t.style('opacity', lineOpacity);\n      d3.selectAll('.circle')\n\t\t\t\t\t.style('opacity', circleOpacity);\n      d3.select(this)\n        .style(\"stroke-width\", lineStroke)\n        .style(\"cursor\", \"none\");\n    });\n\n\n/* Add circles in the line */\nlines.selectAll(\"circle-group\")\n  .data(data).enter()\n  .append(\"g\")\n  .style(\"fill\", (d, i) => showSentiment?color(i):color_eng(i))\n  .selectAll(\"circle\")\n  .data(d => d.values).enter()\n  .append(\"g\")\n  .attr(\"class\", \"circle\")  \n  .on(\"mouseover\", \n  /*\n  function(d) {\n      d3.select(this)     \n        .style(\"cursor\", \"pointer\")\n        .append(\"text\")\n        .attr(\"class\", \"text\")\n        .text(`${d.price}`)\n        .attr(\"x\", d => xScale(d.date) + 5)\n        .attr(\"y\", d => yScale(d.price) - 10);\n    })\n    */\n  function(d){drawTooltip(d.date)\n    /*\n    divTooltip\n    .style('left', d3.event.pageX+10+'px')\n    .style('top', d3.event.pageY-25+'px')\n    .style('display', 'inline-block')\n    .html(d.price)\n    */\n    })\n  .on(\"mouseout\", \n  /*\n  function(d) {\n      d3.select(this)\n        .style(\"cursor\", \"none\")  \n        .transition()\n        .duration(duration)\n        .selectAll(\".text\").remove();\n    }*/\n    function(d){\n    removeTooltip()\n    divTooltip.style('display', 'none')\n    }\n    \n    )\n  .append(\"circle\")\n  .attr(\"cx\", d => xScale(d.date))\n  .attr(\"cy\", d => yScale(d.price))\n  .attr(\"r\", circleRadius)\n  .style('opacity', circleOpacity)\n  .on(\"mouseover\", function(d) {\n        d3.select(this)\n          .transition()\n          .duration(duration)\n          .attr(\"r\", circleRadiusHover);\n      })\n    .on(\"mouseout\", function(d) {\n        d3.select(this) \n          .transition()\n          .duration(duration)\n          .attr(\"r\", circleRadius);  \n      })\n      ;\n\n\n/* Add Axis into SVG */\nvar xAxis = d3.axisBottom(xScale)\n            .ticks(5);\n\nvar yAxis = d3.axisLeft(yScale)\n            .ticks(5)\n            .tickFormat(function(d) {return d+ \"%\"});\n\nsvg.append(\"g\")\n  .attr(\"class\", \"x axis\")\n  .attr(\"transform\", `translate(0, ${height-margin.bottom})`)\n  .call(xAxis)\n  .selectAll(\".tick text\")\n  .call(wrap, 20)\n\nsvg.append(\"g\")\n  .attr(\"class\", \"y axis\")\n  .call(yAxis)\n  .append('text')\n  .attr(\"y\", 15)\n  .attr('x', 5)\n  .attr(\"text-anchor\", \"start\")\n  .attr(\"transform\", \"rotate(-0)\")\n  .attr(\"fill\", \"#000\")\n  .text(showSentiment?'Sentiment [%]':'Engagement rate [%]');\n\nfunction removeTooltip() {\n    if (tooltip) tooltip.style('display', 'none');\n    if (tooltipLine) tooltipLine.attr('stroke', 'none');\n  }\n\n  function drawTooltip(date) {\n\n    var pos = 0\n    var neg = 0\n    var neu = 0\n\n    var values = []\n    data.forEach(element => {\n        if(element.name === 'pos'){\n            element.values.forEach(month=>{\n                if (month.date === date){\n                    pos = month.price\n                    values.push({name:'pos', eng_name:'Comments', value:month.price})\n                }\n            })\n        }\n        if(element.name === 'neg'){\n            element.values.forEach(month=>{\n                if (month.date === date){\n                    neg = month.price\n                    values.push({name:'neg',eng_name:'Likes', value:month.price})\n\n                }\n            })\n        }\n        if(element.name === 'neu'){\n            element.values.forEach(month=>{\n                if (month.date === date){\n                    neu = month.price\n                    values.push({name:'neu', eng_name:'Shares', value:month.price})\n\n                }\n            })\n        }\n    });\n\n    values.sort((a, b) => b.value - a.value);\n\n      \n    tooltipLine.attr('stroke', 'grey')\n      .attr('x1', xScale(date))\n      .attr('x2', xScale(date))\n      .attr('y1', 0)\n      .attr('y2', height-margin.bottom);\n \n      divTooltip\n      .style('left', d3.event.pageX+10+'px')\n      .style('top', d3.event.pageY-25+'px')\n      .style('display', 'inline-block')\n      .html(showSentiment?\n        values.map(item=>{\n         return ('<span class=dot_'+(item.name)+'></span> '+(item.value) +'% </br>')\n        })\n        :\n        values.map(item=>{\n          return ('<span class=dot_'+(item.eng_name)+'></span> '+(item.eng_name)+': '+(item.value) +'% </br>')\n         })\n      \n      )\n \n  }\n\n  function wrap(text, width) {\n    text.each(function () {\n        var text = d3.select(this),\n            words = text.text().split(/\\s+/).reverse(),\n            word,\n            line = [],\n            lineNumber = 0,\n            lineHeight = 1, // ems\n            y = text.attr(\"y\")-((words.length+1)*4),\n            dy = parseFloat(text.attr(\"dy\")),\n            tspan = text.text(null).append(\"tspan\").attr(\"x\", 0).attr(\"y\", y).attr(\"dy\", dy + \"em\");\n        while (word = words.pop()) {\n            line.push(word);\n            tspan.text(line.join(\" \"));\n            if (tspan.node().getComputedTextLength() > width) {\n                line.pop();\n                tspan.text(line.join(\" \"));\n                line = [word];\n                tspan = text.append(\"tspan\").attr(\"x\", 0).attr(\"y\", y).attr(\"dy\", ++lineNumber * lineHeight + dy + \"em\").text(word);\n            }\n        }\n    });\n  }\n\n    }, [choosenSentiment, showSentiment])\n\n    return(\n        <>\n       \n      <div className='lineContainer'>\n        <div className='line_infoContainer'>\n            <i className=\"fas fa-info-circle bar_info\" data-tip data-for='linechartInfo'></i>\n            <ReactTooltip id='linechartInfo' className=\"bar_infoTooltip\" place=\"top\" textColor='#4d4d4d' backgroundColor='#FFDFC3'>\n             \n              <p>The graph shows the engagemet rate or sentiment for <strong>all posts</strong> in the chosen category or channel per month</p>\n              \n\n            </ReactTooltip>        \n          </div>\n\n      <div className='linechartContainer'>\n            <div className='lineDropdownContainer'>\n              <select className='LinedropDown' onChange={e => handleOption(e)}>\n                <option value='sent'>Sentiment</option>    \n                <option value='eng'>Engagement</option>           \n              </select>\n            </div>\n          \n\n          \n          \n          <svg id='lineChart' width=\"440\" height=\"220\" ref={d3Container}></svg>\n          </div>\n          </div>\n        </>\n    )\n}\n\nexport default LineChart\n"]},"metadata":{},"sourceType":"module"}